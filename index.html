<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Sira Coranique â€” V24 (Ar-Roum Premium)</title>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    /* -----------------------------------------------------------
       CSS (DESIGN V17 + FLIP CARDS + BIG FONTS)
       ----------------------------------------------------------- */
    @import url('https://cdn.jsdelivr.net/npm/kfgqpc-uthmanic-script-hafs-regular@1.0.0/index.min.css');
    @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800;900&family=Fredoka:wght@400;600&display=swap');

    :root {
      --primary: #6C5CE7; --bg-body: #F0F3F8; --card-bg: #ffffff;
      --th-mekka: #a29bfe; --th-trial: #ff7675; --th-hope: #fdcb6e; --th-medina: #00cec9; --th-win: #55efc4;
      --card-shadow: 0 6px 0 rgba(0,0,0,0.05);
      --bounce: cubic-bezier(0.175, 0.885, 0.32, 1.275);
      --quiz-bg: #2c0b56; --story-bg: #2d3436; --correct: #2ecc71; --wrong: #ff4757;
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    body { margin: 0; background: var(--bg-body); font-family: 'Nunito', sans-serif; padding-bottom: 80px; min-height: 100vh; color: #2d3436; }
    .app-container { width: 100%; max-width: 650px; margin: 0 auto; padding: 15px; }
    .d-none { display: none !important; }

    /* HEADER */
    .header-box {
      background: linear-gradient(135deg, #6C5CE7, #a29bfe); border-radius: 30px; padding: 25px 20px; color: white;
      box-shadow: 0 10px 25px rgba(108, 92, 231, 0.3); margin-bottom: 30px; text-align: center; position: relative; overflow: hidden;
    }
    .header-title { font-family: 'Fredoka', sans-serif; font-size: 1.6rem; margin: 0; position:relative; z-index:2; text-transform: uppercase; line-height: 1.3; }
    .header-sub { font-size: 0.9rem; opacity: 0.9; margin-top: 5px; position:relative; z-index:2; font-weight: bold; }

    /* TIMELINE */
    .timeline-container { position: relative; padding-left: 20px; }
    .timeline-line {
      position: absolute; left: 29px; top: 20px; bottom: 0; width: 4px;
      background-image: linear-gradient(to bottom, #dfe6e9 50%, transparent 50%); background-size: 4px 20px; z-index: 0;
    }
    .timeline-section { margin-bottom: 40px; position: relative; z-index: 1; }
    .section-header { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
    .section-number {
      width: 40px; height: 40px; background: white; color: var(--primary); border: 3px solid var(--primary);
      border-radius: 50%; display: flex; align-items: center; justify-content: center;
      font-family: 'Fredoka'; font-size: 1.1rem; font-weight: 700; box-shadow: 0 4px 0 rgba(0,0,0,0.1); flex-shrink: 0;
    }
    .section-title { font-family: 'Fredoka'; font-size: 1.1rem; margin: 0; }
    .section-desc { font-size: 0.8rem; color: #636e72; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; }

    /* HUB CARDS */
    .hub-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 15px; margin-left: 15px; }
    .hub-card {
      background: white; border-radius: 20px; padding: 15px; text-align: center; cursor: pointer; position: relative;
      transition: all 0.2s var(--bounce); display: flex; flex-direction: column; align-items: center; justify-content: center;
      min-height: 120px; border: 2px solid transparent; box-shadow: var(--card-shadow);
    }
    .hub-card:active { transform: scale(0.96); }
    .hub-card.locked { opacity: 0.7; background: #f1f2f6; border-bottom: 4px solid #dfe6e9; filter: grayscale(0.9); cursor: not-allowed; }
    
    .th-mekka { border-bottom: 5px solid var(--th-mekka); } .th-mekka .hub-icon { color: var(--th-mekka); }
    .th-trial { border-bottom: 5px solid var(--th-trial); } .th-trial .hub-icon { color: var(--th-trial); }
    .th-hope { border-bottom: 5px solid var(--th-hope); } .th-hope .hub-icon { color: #f39c12; }
    .th-medina { border-bottom: 5px solid var(--th-medina); } .th-medina .hub-icon { color: var(--th-medina); }
    .th-win { border-bottom: 5px solid var(--th-win); } .th-win .hub-icon { color: var(--th-win); }

    .hub-icon { font-size: 2rem; margin-bottom: 8px; display: block; }
    .hub-title-txt { font-family: 'Fredoka'; font-weight: 600; font-size: 0.9rem; margin-bottom: 3px; line-height: 1.2; }
    .hub-sub-txt { font-size: 0.7rem; font-weight: 700; color: #b2bec3; }
    .lock-icon { position: absolute; top: 10px; right: 10px; font-size: 0.9rem; color: #b2bec3; }

    /* MODULE & COMMON */
    #view-module { display: none; }
    .home-btn { 
      position: absolute; left: 20px; top: 50%; transform: translateY(-50%); 
      background: rgba(255,255,255,0.25); border: none; color: white; width: 40px; height: 40px; 
      border-radius: 50%; cursor: pointer; font-size: 1.2rem; display: flex; align-items: center; justify-content: center; z-index: 10;
    }
    
    .verse-card { background: var(--card-bg); border-radius: 24px; padding: 20px; border-bottom: 5px solid #dfe6e9; margin-bottom: 15px; }
    .verse-card.active { border-color: var(--primary); transform: scale(1.01); box-shadow: 0 0 25px rgba(108, 92, 231, 0.4); z-index: 10; }
    .verse-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
    .play-btn { background: var(--primary); color: white; border: none; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; }
    .play-btn.playing { background: #ff7675; animation: pulse 1.5s infinite; }
    
    .ar-text { font-family: 'KFGQPC Uthmanic Script HAFS Regular'; text-align: right; direction: rtl; font-size: 30px; margin: 10px 0; line-height: 1.6; }
    .tr-text { color: #e17055; font-weight: 800; font-size: 15px; margin-bottom: 5px; display:block; } 
    .fr-text { font-style: italic; font-size: 15px; color: #636e72; display:block; }
    
    .toolbar { display: flex; gap: 10px; justify-content: center; margin-bottom: 10px; flex-wrap: wrap; }
    .tool-btn { background: white; border: 2px solid #dfe6e9; border-radius: 12px; padding: 8px 14px; font-weight: 800; color: #636e72; cursor: pointer; display: flex; align-items: center; gap: 5px; }
    
    .font-toolbar { display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; margin-bottom: 25px; background: rgba(255,255,255,0.5); padding: 8px; border-radius: 16px; }
    .mini-btn { width: 30px; height: 30px; border-radius: 50%; border: 2px solid #dfe6e9; background: white; font-weight: 900; color: #2d3436; cursor: pointer; display: flex; align-items: center; justify-content: center; }
    
    .fabs-container { position: fixed; bottom: 20px; right: 20px; display: flex; flex-direction: column; gap: 15px; z-index: 200; }
    .fab-btn { width: 60px; height: 60px; border-radius: 50%; border: none; color: white; font-size: 1.6rem; cursor: pointer; box-shadow: 0 6px 15px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; }
    .fab-story { background: #0984e3; border: 3px solid white; } .fab-quiz { background: #fdcb6e; border: 3px solid white; }
    .badge { background:#f1f2f6; color:#636e72; font-weight:900; padding:6px 12px; border-radius:12px; font-size:0.75rem; text-transform: uppercase; }

    /* FLIP CARDS */
    .flip-card {
        background-color: transparent;
        width: 100%;
        max-width: 500px;
        height: 420px; /* Un peu plus haut pour le texte */
        perspective: 1000px;
        cursor: pointer;
        margin-bottom: 20px;
    }
    .flip-card-inner {
        position: relative;
        width: 100%;
        height: 100%;
        text-align: center;
        transition: transform 0.6s;
        transform-style: preserve-3d;
    }
    .flip-card.flipped .flip-card-inner { transform: rotateY(180deg); }
    .flip-card-front, .flip-card-back {
        position: absolute;
        width: 100%;
        height: 100%;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        border-radius: 24px;
        padding: 25px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }
    .flip-card-front { background-color: white; color: #2d3436; }
    .flip-card-back {
        background-color: #f1f2f6;
        color: #2d3436;
        transform: rotateY(180deg);
        border: 2px solid var(--primary);
        text-align: left;
        align-items: flex-start;
        overflow-y: auto;
    }
    .tap-hint { position: absolute; bottom: 15px; font-size: 0.8rem; color: #aaa; animation: pulse 2s infinite; }

    /* MODALS & STORIES */
    .fullscreen-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 300; display: none; flex-direction: column; overflow-y: auto; }
    .fullscreen-modal.open { display: flex; animation: fadeIn 0.3s; }
    .story-bg { background: var(--story-bg); color: white; align-items: center; padding: 20px; }
    
    .story-img { font-size: 4rem; display: block; margin-bottom: 20px; }
    .story-title { font-family: 'Fredoka'; font-size: 1.6rem; color: var(--primary); margin-bottom: 15px; }
    .story-text { font-size: 1.1rem; line-height: 1.6; color: #444; margin-bottom: 15px; text-align: left; width: 100%; }
    
    .source-content-back { font-size: 0.95rem; line-height: 1.6; color: #555; white-space: pre-line; }
    /* Style spÃ©cial pour les citations coraniques dans les sources */
    .source-content-back .ar-text { display: block; text-align: center; margin: 10px 0; color: var(--primary); font-size: 1.4rem; }
    
    .source-badge { background: var(--primary); color: white; padding: 5px 10px; border-radius: 15px; font-size: 0.8rem; margin-bottom: 10px; display: inline-block; }

    .story-nav-btn { background: var(--primary); color: white; border: none; padding: 12px 30px; border-radius: 50px; font-weight: 800; font-size: 1rem; cursor: pointer; margin-top: 20px; z-index: 10; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
    
    /* QUIZ & GAMES - CORRECTION POLICE */
    .quiz-bg { background: var(--quiz-bg); color: white; padding: 15px; align-items: center; }
    .quiz-nav { width: 100%; max-width: 600px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding: 0 10px; }
    .game-area { width: 100%; max-width: 500px; display: none; flex-direction: column; align-items: center; padding-bottom: 40px; }
    .question-box { margin-bottom: 25px; min-height: 120px; width: 100%; text-align: center; display: flex; flex-direction: column; justify-content: center; }
    .q-ar { font-family: 'KFGQPC Uthmanic Script HAFS Regular'; font-size: 3rem; direction: rtl; }
    .q-tr-game { font-family: 'Nunito'; font-size: 1rem; background: rgba(0,0,0,0.25); padding: 8px 14px; border-radius: 12px; display: inline-block; margin-top: 10px; }
    
    .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; width: 100%; }
    
    /* GROSSISSEMENT BOUTONS REPONSES */
    .game-btn { 
        background: #5f27cd; 
        color: white; 
        border: none; 
        padding: 16px; 
        border-radius: 16px; 
        font-weight: 800; 
        cursor: pointer; 
        box-shadow: 0 5px 0 #3c1585; 
        min-height: 90px; /* Plus haut */
        display:flex; 
        flex-direction:column; 
        align-items:center; 
        justify-content:center;
        font-size: 1.3rem; /* POLICE AGRANDIE */
        line-height: 1.3;
    }
    .game-btn span { font-size: 1.3rem; }
    .game-btn.correct { background: var(--correct) !important; box-shadow: 0 5px 0 #219150; }
    .game-btn.wrong { background: var(--wrong) !important; box-shadow: 0 5px 0 #c0392b; opacity: 0.7; }
    
    .puzzle-dropzone { width: 100%; min-height: 100px; border: 3px dashed rgba(255,255,255,0.3); border-radius: 16px; display: flex; flex-wrap: wrap; direction: rtl !important; justify-content: flex-start; gap: 8px; padding: 10px; background: rgba(0,0,0,0.15); margin-bottom: 20px; }
    .puzzle-source { width: 100%; display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; direction: rtl !important; }
    
    /* GROSSISSEMENT PUZZLE */
    .puzzle-piece { 
        background: white; 
        color: #2d3436; 
        padding: 10px 15px; 
        border-radius: 10px; 
        font-family: 'KFGQPC Uthmanic Script HAFS Regular'; 
        font-size: 2rem; /* POLICE ARABE AGRANDIE */
        cursor: pointer; 
    }
    .correction-box { margin-top: 20px; background: rgba(255,255,255,0.15); padding: 15px; border-radius: 15px; color: #ffcccc; font-weight: 800; display: none; }
    
    #level-complete { position: absolute; top:0; left:0; width:100%; height:100%; background:var(--quiz-bg); z-index:500; display:none; flex-direction:column; align-items:center; justify-content:center; text-align:center; }
    .grid-menu { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; width: 100%; max-width: 500px; margin-top: 20px; }
    .menu-card { background: rgba(255,255,255,0.1); border-radius: 20px; padding: 20px 10px; text-align: center; cursor: pointer; border: 3px solid transparent; }
    .menu-icon { font-size: 2.5rem; display: block; margin-bottom: 5px; }
    .menu-title { font-size: 1.2rem; font-weight: 800; } /* Titre menu plus gros */

    .progress-track { width: 100%; max-width: 500px; height: 10px; background: rgba(255,255,255,0.2); border-radius: 10px; overflow: hidden; margin-bottom: 20px; display: none; }
    .progress-fill { height: 100%; width: 0%; background: #00cec9; transition: width 0.5s ease; }
    .close-btn { background: none; border: none; color: white; font-size: 1.4rem; cursor: pointer; opacity: 0.8; }

    @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  </style>
</head>

<body>

<div id="view-hub">
  <div class="header-box">
    <h1 class="header-title">LA MISSION DU<br>PROPHETE MUHAMMAD ï·º</h1>
    <div class="header-sub">Sira & Coran</div>
  </div>

  <div class="timeline-container">
    <div class="timeline-line"></div>

    <div class="timeline-section">
      <div class="section-header"><div class="section-number">1</div><div class="section-info"><h3 class="section-title">Avant la naissance</h3><div class="section-desc">L'Enfance</div></div></div>
      <div class="hub-grid">
        <div class="hub-card th-mekka" onclick="loadModule('al-fil')"><span class="hub-icon">ğŸ˜</span><div class="hub-title-txt">Al-Fil</div><div class="hub-sub-txt">L'Ã‰lÃ©phant</div></div>
        <div class="hub-card th-mekka locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸ </span><div class="hub-title-txt">Quraysh</div><div class="hub-sub-txt">Les Faveurs</div></div>
      </div>
    </div>

    <div class="timeline-section">
      <div class="section-header"><div class="section-number">2</div><div class="section-info"><h3 class="section-title">DÃ©but RÃ©vÃ©lation</h3><div class="section-desc">Mission ProphÃ©tique</div></div></div>
      <div class="hub-grid">
        <div class="hub-card th-mekka" onclick="loadModule('al-alaq')"><span class="hub-icon">â›°ï¸</span><div class="hub-title-txt">Al-'Alaq</div><div class="hub-sub-txt">Lis !</div></div>
        <div class="hub-card th-mekka locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸ›Œ</span><div class="hub-title-txt">Al-Muddathir</div><div class="hub-sub-txt">LÃ¨ve-toi</div></div>
        <div class="hub-card th-hope locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">â˜€ï¸</span><div class="hub-title-txt">Ad-Duha</div><div class="hub-sub-txt">Le Jour</div></div>
        <div class="hub-card th-hope locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">â¤ï¸</span><div class="hub-title-txt">Al-Inshirah</div><div class="hub-sub-txt">Soulagement</div></div>
      </div>
    </div>

    <div class="timeline-section">
      <div class="section-header"><div class="section-number">3</div><div class="section-info"><h3 class="section-title">Opposition</h3><div class="section-desc">PersÃ©cutions</div></div></div>
      <div class="hub-grid">
        <div class="hub-card th-hope" onclick="loadModule('ar-rum')"><span class="hub-icon">âš”ï¸</span><div class="hub-title-txt">Ar-Rum</div><div class="hub-sub-txt">Les Romains</div></div>
        <div class="hub-card th-trial locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸ”¥</span><div class="hub-title-txt">Al-Masad</div><div class="hub-sub-txt">Abou Lahab</div></div>
        <div class="hub-card th-trial locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸ¥£</span><div class="hub-title-txt">Al-Ma'oun</div><div class="hub-sub-txt">L'Entraide</div></div>
        <div class="hub-card th-trial locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸ’§</span><div class="hub-title-txt">Al-Kawthar</div><div class="hub-sub-txt">Abondance</div></div>
        <div class="hub-card th-trial locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">âœ‹</span><div class="hub-title-txt">Al-Kafiroun</div><div class="hub-sub-txt">Les InfidÃ¨les</div></div>
        <div class="hub-card th-trial locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸ¦¯</span><div class="hub-title-txt">'Abasa</div><div class="hub-sub-txt">L'Aveugle</div></div>
        <div class="hub-card th-trial locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸŒ‘</span><div class="hub-title-txt">Al-Qamar</div><div class="hub-sub-txt">La Lune</div></div>
      </div>
    </div>

    <div class="timeline-section">
        <div class="section-header"><div class="section-number">4</div><div class="section-info"><h3 class="section-title">Isra & Mi'raj</h3><div class="section-desc">Voyage Nocturne</div></div></div>
        <div class="hub-grid">
            <div class="hub-card th-mekka locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸŒŒ</span><div class="hub-title-txt">Al-Isra</div><div class="hub-sub-txt">Le Voyage</div></div>
        </div>
    </div>

    <div class="timeline-section">
        <div class="section-header"><div class="section-number">5</div><div class="section-info"><h3 class="section-title">L'HÃ©gire</h3><div class="section-desc">Migration</div></div></div>
        <div class="hub-grid">
            <div class="hub-card th-medina locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸ•¸ï¸</span><div class="hub-title-txt">At-Tawba</div><div class="hub-sub-txt">La Grotte</div></div>
            <div class="hub-card th-medina locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸ¦‚</span><div class="hub-title-txt">Al-Anfal</div><div class="hub-sub-txt">Complot</div></div>
        </div>
    </div>

    <div class="timeline-section">
        <div class="section-header"><div class="section-number">6</div><div class="section-info"><h3 class="section-title">Batailles</h3><div class="section-desc">EvÃ©nements MÃ©dine</div></div></div>
        <div class="hub-grid">
            <div class="hub-card th-medina locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸ›¡ï¸</span><div class="hub-title-txt">Al-Anfal</div><div class="hub-sub-txt">Badr</div></div>
            <div class="hub-card th-medina locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸ¹</span><div class="hub-title-txt">Al-Imran</div><div class="hub-sub-txt">Uhud</div></div>
            <div class="hub-card th-medina locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸ°</span><div class="hub-title-txt">Al-Ahzab</div><div class="hub-sub-txt">Le FossÃ©</div></div>
            <div class="hub-card th-medina locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸŒ´</span><div class="hub-title-txt">Al-Hashr</div><div class="hub-sub-txt">Expulsion</div></div>
            <div class="hub-card th-medina locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸ•¯ï¸</span><div class="hub-title-txt">An-Nur</div><div class="hub-sub-txt">Calomnie</div></div>
        </div>
    </div>

    <div class="timeline-section">
        <div class="section-header"><div class="section-number">7</div><div class="section-info"><h3 class="section-title">La Victoire</h3><div class="section-desc">TraitÃ©s</div></div></div>
        <div class="hub-grid">
            <div class="hub-card th-win locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸ³ï¸</span><div class="hub-title-txt">Al-Fath</div><div class="hub-sub-txt">Houdaybiya</div></div>
            <div class="hub-card th-win locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸš©</span><div class="hub-title-txt">An-Nasr</div><div class="hub-sub-txt">Victoire</div></div>
        </div>
    </div>

    <div class="timeline-section">
        <div class="section-header"><div class="section-number">8</div><div class="section-info"><h3 class="section-title">Miracles</h3><div class="section-desc">Signes Divins</div></div></div>
        <div class="hub-grid">
             <div class="hub-card th-trial locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸ§</span><div class="hub-title-txt">Al-Jinn</div><div class="hub-sub-txt">Les Djinns</div></div>
             <div class="hub-card th-trial locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸ›¡ï¸</span><div class="hub-title-txt">Mu'awwidhat</div><div class="hub-sub-txt">Protection</div></div>
        </div>
    </div>

    <div class="timeline-section">
        <div class="section-header"><div class="section-number">9</div><div class="section-info"><h3 class="section-title">Le ModÃ¨le</h3><div class="section-desc">Comportement</div></div></div>
        <div class="hub-grid">
            <div class="hub-card th-medina locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">âœ¨</span><div class="hub-title-txt">Al-Qalam</div><div class="hub-sub-txt">CaractÃ¨re</div></div>
            <div class="hub-card th-medina locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸ¤</span><div class="hub-title-txt">Al-Ahzab</div><div class="hub-sub-txt">ModÃ¨le</div></div>
        </div>
    </div>

    <div class="timeline-section">
        <div class="section-header"><div class="section-number">10</div><div class="section-info"><h3 class="section-title">Fin de Mission</h3><div class="section-desc">Accomplissement</div></div></div>
        <div class="hub-grid">
            <div class="hub-card th-win locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">â˜ï¸</span><div class="hub-title-txt">Al-Ma'ida</div><div class="hub-sub-txt">ParachÃ¨vement</div></div>
            <div class="hub-card th-win locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸ</span><div class="hub-title-txt">An-Nasr</div><div class="hub-sub-txt">Les Adieux</div></div>
        </div>
    </div>

    <div class="timeline-section">
        <div class="section-header"><div class="section-number">11</div><div class="section-info"><h3 class="section-title">Juz 'Amma</h3><div class="section-desc">Autres Sourates</div></div></div>
        <div class="hub-grid">
            <div class="hub-card th-mekka locked"><span class="lock-icon">ğŸ”’</span><span class="hub-icon">ğŸ“š</span><div class="hub-title-txt">Juz 'Amma</div><div class="hub-sub-txt">Suite...</div></div>
        </div>
    </div>

  </div>
</div>

<div id="view-module">
  <div class="header-box">
    <button class="home-btn" onclick="goHome()">ğŸ </button>
    <h1 class="header-title" id="mod-title">...</h1>
  </div>
  
  <div class="toolbar">
    <div class="tool-btn">
      <span style="font-size:1.1rem">ğŸ™ï¸</span>
      <select id="reciter-opt" onchange="changeReciter(this.value)" class="reciter-select" style="min-width:100px;">
        <option value="Minshawy_Teacher_128kbps">Minshawi (Enfant)</option>
        <option value="Husary_Muallim_128kbps">Al-Hussary</option>
        <option value="Alafasy_128kbps">Mishary Alafasy</option>
      </select>
    </div>
    <button class="tool-btn" onclick="toggleLayer('tr-text', this)">ğŸ‘ï¸ PhonÃ©tique</button>
    <button class="tool-btn" onclick="toggleLayer('fr-text', this)">ğŸ“– FranÃ§ais</button>
    <button class="tool-btn" onclick="openStoryHub()" style="border-color:#0984e3; color:#0984e3;">ğŸ“œ Raconte-moi</button>
  </div>

  <div class="font-toolbar">
    <div class="font-group"><span class="font-label">AR</span><button class="mini-btn" onclick="adjustSize('ar', -2)">-</button><button class="mini-btn" onclick="adjustSize('ar', 2)">+</button></div>
    <div class="font-group" style="margin-left:15px;"><span class="font-label">FR/TR</span><button class="mini-btn" onclick="adjustSize('tr', -1); adjustSize('fr', -1)">-</button><button class="mini-btn" onclick="adjustSize('tr', 1); adjustSize('fr', 1)">+</button></div>
  </div>

  <div id="verses-container"></div>

  <div class="fabs-container">
    <button class="fab-btn fab-quiz" onclick="openGameHub()">ğŸ§ </button>
    <button class="fab-btn fab-story" onclick="openStoryHub()">ğŸ“œ</button>
  </div>
</div>

<div class="fullscreen-modal story-bg" id="story-modal">
  <div class="quiz-nav" style="color:white; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:10px;">
    <button class="close-btn" onclick="closeStory()">âœ• Fermer</button>
    <div style="font-weight:900;">CONTEXTE SIRA</div>
  </div>
  <div id="story-age-select" class="grid-menu" style="max-width:400px;">
    <div class="menu-card" onclick="selectStoryAge('eveil')" style="background:white; color:#333;"><span class="menu-icon">ğŸ£</span><div class="menu-title">Groupe Ã‰veil</div></div>
    <div class="menu-card" onclick="selectStoryAge('chercheur')" style="background:white; color:#333;"><span class="menu-icon">ğŸ¦</span><div class="menu-title">Groupe Chercheur</div></div>
  </div>
  <div id="story-container" style="width:100%; display:none; flex-direction:column; align-items:center; flex:1; justify-content:center;"></div>
</div>

<div class="fullscreen-modal quiz-bg" id="game-modal">
  <div class="quiz-nav"><button class="close-btn" onclick="closeGameHub()">âœ• Quitter</button><div style="font-weight:900;">JEUX</div></div>
  <div class="progress-track" id="progress-track"><div class="progress-fill" id="progress-fill"></div></div>
  <div id="age-select-screen" class="grid-menu" style="max-width:400px;">
    <div class="menu-card" onclick="selectAge('age6')" style="background:white; color:#333;"><span class="menu-icon">ğŸ£</span><div class="menu-title">Groupe Ã‰veil</div></div>
    <div class="menu-card" onclick="selectAge('age8')" style="background:white; color:#333;"><span class="menu-icon">ğŸ¦</span><div class="menu-title">Groupe Chercheur</div></div>
  </div>
  <div id="level-select-screen" class="grid-menu" style="display:none; max-width:400px;">
    <div class="menu-card" onclick="selectLevel('vocab')" style="background:white; color:#333;"><span class="menu-icon">ğŸ“š</span><div class="menu-title">Vocabulaire</div></div>
    <div class="menu-card" onclick="selectLevel('puzzle')" style="background:white; color:#333;"><span class="menu-icon">ğŸ§©</span><div class="menu-title">Puzzle</div></div>
    <div class="menu-card" onclick="selectLevel('missing')" style="background:white; color:#333;"><span class="menu-icon">ğŸ§</span><div class="menu-title">Expert</div></div>
  </div>
  <div id="game-area" class="game-area">
    <div id="question-box" class="question-box"></div><div id="options-grid" class="options-grid" style="display:none;"></div>
    <div id="puzzle-area" class="puzzle-area" style="display:none;"><div id="puzzle-dropzone" class="puzzle-dropzone"></div><div id="puzzle-source" class="puzzle-source"></div></div>
    <div id="correction-box" class="correction-box"></div>
  </div>
  <div id="level-complete"><span class="neon-text">Ù…Ø§ Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡</span><h2 style="margin:0; color:white;">MA SHA ALLAH !</h2><button id="next-level-btn" class="game-btn" style="background:white; color:var(--quiz-bg); margin-top:20px; width:100%; z-index:999;" onclick="resetGame()">Menu</button></div>
</div>

<script>
  // ====================== DATA (BIBLIOTHEQUE) ======================
  const ModuleContent = {
    // 1. AL-FIL (L'Ã‰LÃ‰PHANT) - REMASTERISÃ‰ + SOURCES EXACTES
    "al-fil": {
      title: "Al-Fil (L'Ã‰lÃ©phant)", surahId: 105,
      verses: [
        { id:1, ar:"Ø£ÙÙ„ÙÙ…Û¡ ØªÙØ±Ù ÙƒÙÙŠÛ¡ÙÙ ÙÙØ¹ÙÙ„Ù Ø±ÙØ¨ÙÙ‘ÙƒÙ Ø¨ÙØ£ÙØµÛ¡Ø­ÙÙ°Ø¨Ù Ù±Ù„Û¡ÙÙÙŠÙ„Ù", tr:"Alam tara kayfa fa'ala rabbuka bi-ashÃ¢bi l-fÃ®l", fr:"N'as-tu pas vu comment ton Seigneur a agi envers les gens de l'Ã‰lÃ©phant ?" },
        { id:2, ar:"Ø£ÙÙ„ÙÙ…Û¡ ÙŠÙØ¬Û¡Ø¹ÙÙ„Û¡ ÙƒÙÙŠÛ¡Ø¯ÙÙ‡ÙÙ…Û¡ ÙÙÙŠ ØªÙØ¶Û¡Ù„ÙÙŠÙ„Ù–", tr:"Alam yaj'al kaydahum fÃ® taá¸lÃ®l", fr:"N'a-t-Il pas rendu leur ruse complÃ¨tement vaine ?" },
        { id:3, ar:"ÙˆÙØ£ÙØ±Û¡Ø³ÙÙ„Ù Ø¹ÙÙ„ÙÙŠÛ¡Ù‡ÙÙ…Û¡ Ø·ÙÙŠÛ¡Ø±Ù‹Ø§ Ø£ÙØ¨ÙØ§Ø¨ÙÙŠÙ„Ù", tr:"Wa arsala 'alayhim tayran abÃ¢bÃ®l", fr:"Et envoyÃ© sur eux des oiseaux par volÃ©es," },
        { id:4, ar:"ØªÙØ±Û¡Ù…ÙÙŠÙ‡ÙÙ… Ø¨ÙØ­ÙØ¬ÙØ§Ø±ÙØ©Ù– Ù…ÙÙ‘Ù† Ø³ÙØ¬ÙÙ‘ÙŠÙ„Ù–", tr:"TarmÃ®him bi-hijÃ¢ratin min sijjÃ®l", fr:"qui leur lanÃ§aient des pierres d'argile durcie ?" },
        { id:5, ar:"ÙÙØ¬ÙØ¹ÙÙ„ÙÙ‡ÙÙ…Û¡ ÙƒÙØ¹ÙØµÛ¡ÙÙ– Ù…ÙÙ‘Ø£Û¡ÙƒÙÙˆÙ„ÙÛ­", tr:"Faja'alahum ka'asfin ma'kÃ»l", fr:"Il les a rendus semblables Ã  de la paille mÃ¢chÃ©e." }
      ],
      story: {
        eveil: [
          { img:"ğŸ‘‘", title:"Le Roi Jaloux", text:"Il y avait un roi trÃ¨s fort au YÃ©men appelÃ© Abraha. Il avait construit une Ã©glise magnifique en or, mais il Ã©tait trÃ¨s jaloux car tout le monde prÃ©fÃ©rait aller Ã  La Mecque pour tourner autour de la Kaaba, la petite maison d'Allah.", sourceDetail:"Lâ€™histoire dâ€™Abraha, roi du YÃ©men, qui construit une Ã©glise pour dÃ©tourner les pÃ¨lerins de la Kaaba, est rapportÃ©e dans les sources classiques de la Sira et du tafsir :\n\n<span class='ar-text'>Â« Ø¨Ù†Ù‰ Ø¨ØµÙ†Ø¹Ø§Ø¡ ÙƒÙ†ÙŠØ³Ø© Ù„Ù… ÙŠØ± Ù…Ø«Ù„Ù‡Ø§ ÙÙŠ Ø²Ù…Ø§Ù†Ù‡Ø§... ÙˆÙ„Ø³Øª Ø¨Ù…Ù†ØªÙ‡ Ø­ØªÙ‰ Ø£ØµØ±Ù Ø¥Ù„ÙŠÙ‡Ø§ Ø­Ø¬ Ø§Ù„Ø¹Ø±Ø¨ Â»</span>\n(TafsÄ«r al-QÄsimÄ« Maá¸¥Äsin al-TaÊ¾wÄ«l +4).\n\nLa jalousie dâ€™Abraha et son projet de dÃ©truire la Kaaba sont bien Ã©tablis." },
          { img:"ğŸ˜", title:"L'Ã‰lÃ©phant GÃ©ant", text:"Abraha Ã©tait furieux ! Il a prÃ©parÃ© une immense armÃ©e pour dÃ©truire la Kaaba. Il a pris avec lui un Ã©lÃ©phant gigantesque appelÃ© 'Mahmoud'. Les Arabes de la Mecque ont eu trÃ¨s peur et se sont sauvÃ©s dans les montagnes.", sourceDetail:"Abraha prÃ©pare une armÃ©e avec un Ã©lÃ©phant gÃ©ant nommÃ© Mahmoud pour attaquer la Kaaba. Les habitants de La Mecque fuient dans les montagnes, ce qui est confirmÃ© dans les rÃ©cits :\n\n<span class='ar-text'>Â« ÙˆØ³Ø§Ø± Ø¨Ø¬ÙŠØ´Ù‡ ÙˆÙ…Ø¹Ù‡ Ø§Ù„ÙÙŠÙ„... ÙÙ„Ù…Ø§ ÙˆØµÙ„ Ù‚Ø±ÙŠØ¨Ø§ Ù…Ù†Ù‡Ø§ ÙØ± Ø£Ù‡Ù„Ù‡Ø§ Ø¥Ù„Ù‰ Ø§Ù„Ø¬Ø¨Ø§Ù„ ÙˆØ£Ø³Ù„Ù…ÙˆØ§ Ù„Ù‡ Ø§Ù„ÙƒØ¹Ø¨Ø© Â»</span>\n(Al-TashÄ«l li-Ê¿ulÅ«m al-tanzÄ«l +2).\n\nLe rÃ´le de lâ€™Ã©lÃ©phant est central dans la sourate et la Sira." },
          { img:"ğŸ›‘", title:"L'Ã‰lÃ©phant refuse !", text:"ArrivÃ© devant la Mecque, quelque chose d'incroyable s'est passÃ©. L'Ã©lÃ©phant Mahmoud s'est assis ! Les soldats le tapaient pour qu'il avance vers la Kaaba, mais il refusait. Par contre, si on le tournait vers le YÃ©men, il courait !", sourceDetail:"Lâ€™Ã©pisode oÃ¹ lâ€™Ã©lÃ©phant refuse dâ€™avancer vers la Kaaba, mais se dirige vers le YÃ©men, est rapportÃ© dans les tafsirs et la Sira :\n\n<span class='ar-text'>Â« ÙÙ„Ù…Ø§ ÙˆØ¬Ù‡ÙˆÙ‡ Ø¥Ù„Ù‰ Ø§Ù„ÙƒØ¹Ø¨Ø© Ø¨Ø±Ùƒ ÙˆÙ„Ù… ÙŠØªØ­Ø±ÙƒØŒ ÙˆØ¥Ø°Ø§ ÙˆØ¬Ù‡ÙˆÙ‡ Ø¥Ù„Ù‰ ØºÙŠØ±Ù‡Ø§ Ø§Ù†Ø·Ù„Ù‚ Â»</span>\n(Fatá¸¥ al-Raá¸¥mÄn fÄ« tafsÄ«r al-QurÊ¾Än +1).\n\nCe dÃ©tail est authentique et souvent citÃ© pour montrer la protection divine." },
          { img:"ğŸ¦…", title:"Les Oiseaux Soldats", text:"Soudain, le ciel est devenu noir. Allah a envoyÃ© des milliers d'oiseaux (Ababil). Chaque oiseau portait trois petites pierres d'argile brÃ»lante. Ils les ont lÃ¢chÃ©es sur l'armÃ©e d'Abraha et la Kaaba a Ã©tÃ© sauvÃ©e !", sourceDetail:"La description des oiseaux Ababil envoyÃ©s par Allah, portant des pierres dâ€™argile brÃ»lante, est directement tirÃ©e du Coran :\n\n<span class='ar-text'>ï´¾ÙˆØ£Ø±Ø³Ù„ Ø¹Ù„ÙŠÙ‡Ù… Ø·ÙŠØ±Ø§ Ø£Ø¨Ø§Ø¨ÙŠÙ„ * ØªØ±Ù…ÙŠÙ‡Ù… Ø¨Ø­Ø¬Ø§Ø±Ø© Ù…Ù† Ø³Ø¬ÙŠÙ„ï´¿</span>\n(MarÄá¸¥ LabÄ«d li-kashf maÊ¿nÄ al-QurÊ¾Ä... +5).\n\nLes tafsirs prÃ©cisent que chaque oiseau portait trois pierres (MarÄá¸¥ LabÄ«d li-kashf maÊ¿nÄ al-QurÊ¾Ä... +1)." }
        ],
        chercheur: [
          { img:"ğŸ“…", title:"L'AnnÃ©e de l'Ã‰lÃ©phant", text:"Cet Ã©vÃ©nement s'est passÃ© en l'an 570. C'est une annÃ©e trÃ¨s spÃ©ciale car c'est l'annÃ©e de naissance du ProphÃ¨te Muhammad ï·º. Allah a protÃ©gÃ© la ville sainte pour prÃ©parer l'arrivÃ©e de Son dernier Messager.", sourceDetail:"Lâ€™Ã©vÃ©nement a eu lieu en 570, annÃ©e de naissance du ProphÃ¨te ï·º, appelÃ©e Â« lâ€™AnnÃ©e de lâ€™Ã‰lÃ©phant Â» :\n\n<span class='ar-text'>Â« ÙÙƒØ§Ù†ÙˆØ§ ÙŠÙ‚ÙˆÙ„ÙˆÙ†: Ø­Ø¯Ø« Ù‡Ø°Ø§ Ø¹Ø§Ù… Ø§Ù„ÙÙŠÙ„ Ø£Ùˆ Ù‚Ø¨Ù„Ù‡ Ø£Ùˆ Ø¨Ø¹Ø¯Ù‡. ÙˆÙ…Ù† Ø°Ù„Ùƒ Ù…Ø§ Ø¹Ø±Ù Ù…Ù† Ù…ÙˆÙ„Ø¯ Ø§Ù„Ù†Ø¨Ù‰ ï·º ÙÙ‰ Ø¹Ø§Ù… Ø§Ù„ÙÙŠÙ„ Ø¹Ù„Ù‰ Ø£Ø´Ù‡Ø± Ø§Ù„Ø£Ù‚ÙˆØ§Ù„ Â»</span>\n(TÄrÄ«kh nuzÅ«l al-QurÊ¾Än +1)." },
          { img:"ğŸ•‹", title:"Le Seigneur de la Maison", text:"Le grand-pÃ¨re du ProphÃ¨te, Abdul-Muttalib, est allÃ© voir Abraha pour rÃ©clamer ses chameaux volÃ©s. Abraha a ri : 'Tu t'inquiÃ¨tes pour tes chameaux et pas pour ta Kaaba ?'. Abdul-Muttalib a rÃ©pondu : 'Je suis le seigneur des chameaux, mais La Maison a un Seigneur (Allah) qui la protÃ©gera.'", sourceDetail:"Le dialogue entre Abdul-Muttalib et Abraha est rapportÃ© dans la Sira :\n\n<span class='ar-text'>Â« Ø£Ù†Ø§ Ø±Ø¨ Ø§Ù„Ø¥Ø¨Ù„ØŒ ÙˆÙ„Ù„Ø¨ÙŠØª Ø±Ø¨ ÙŠØ­Ù…ÙŠÙ‡ Â»</span>\n(Fatá¸¥ al-Raá¸¥mÄn fÄ« tafsÄ«r al-QurÊ¾Än +1).\n\nCette rÃ©ponse est une leÃ§on de tawakkul (confiance en Allah)." },
          { img:"ğŸ§±", title:"Sijjil (Argile)", text:"Le Coran dit que les pierres Ã©taient en 'Sijjil' (argile cuite). Les savants disent que chaque pierre Ã©tait marquÃ©e avec le nom du soldat qu'elle devait toucher. C'Ã©tait une punition chirurgicale et divine, impossible Ã  Ã©viter.", sourceDetail:"Le Coran mentionne les pierres de Â« Sijjil Â» :\n\n<span class='ar-text'>ï´¾ØªØ±Ù…ÙŠÙ‡Ù… Ø¨Ø­Ø¬Ø§Ø±Ø© Ù…Ù† Ø³Ø¬ÙŠÙ„ï´¿</span>\n(MarÄá¸¥ LabÄ«d li-kashf maÊ¿nÄ al-QurÊ¾Ä... +5).\n\nLes savants expliquent que chaque pierre Ã©tait marquÃ©e pour sa cible (Al-nukat al-dÄlla Ê¿alÄ al-bayÄn fÄ« ...)." },
          { img:"ğŸ¤²", title:"Le Tawakkul", text:"Pourquoi Allah n'a-t-Il pas envoyÃ© la foudre ? Pour montrer que mÃªme des petits oiseaux peuvent vaincre des Ã©lÃ©phants gÃ©ants si Allah le veut. C'est une leÃ§on pour nous : la force ne dÃ©pend pas de la taille des muscles, mais de l'aide d'Allah.", sourceDetail:"La leÃ§on sur la puissance dâ€™Allah, qui utilise de petits oiseaux pour vaincre une armÃ©e dâ€™Ã©lÃ©phants, est un enseignement central de la sourate :\n\n<span class='ar-text'>Â« ÙˆÙÙŠÙ‡Ø§ Ù…Ø¹ Ø°Ù„Ùƒ Ø¹Ø¬Ø§Ø¦Ø¨ Ù…Ù† Ù‚Ø¯Ø±Ø© Ø§Ù„Ù„Ù‡ ÙˆØ´Ø¯Ø© Ø¹Ù‚Ø§Ø¨Ù‡ Â»</span>\n(Al-TashÄ«l li-Ê¿ulÅ«m al-tanzÄ«l +3).\n\nCela illustre parfaitement le tawakkul." }
        ]
      },
      games: {
        age6: {
          vocab: [
            {q:"Ù±Ù„Û¡ÙÙÙŠÙ„Ù",tr:"Al-Fil",a:"L'Ã‰lÃ©phant",opts:[{t:"L'Ã‰lÃ©phant",i:"ğŸ˜"},{t:"Le Lion",i:"ğŸ¦"}]},
            {q:"Ø·ÙÙŠÛ¡Ø±Ù‹Ø§",tr:"Tayran",a:"Oiseaux",opts:[{t:"Oiseaux",i:"ğŸ¦…"},{t:"Avions",i:"âœˆï¸"}]},
            {q:"Ø£ÙØ¨ÙØ§Ø¨ÙÙŠÙ„Ù",tr:"Ababil",a:"Par volÃ©es",opts:[{t:"Par volÃ©es",i:"ğŸ’¨"},{t:"Un seul",i:"â˜ï¸"}]},
            {q:"Ø­ÙØ¬ÙØ§Ø±ÙØ©Ù–",tr:"Hijara",a:"Pierres",opts:[{t:"Pierres",i:"ğŸª¨"},{t:"Bonbons",i:"ğŸ¬"}]},
            {q:"ØªÙØ¶Û¡Ù„ÙÙŠÙ„Ù–",tr:"Tadlil",a:"Vaine / Echec",opts:[{t:"Vaine / Echec",i:"âŒ"},{t:"RÃ©ussite",i:"âœ…"}]},
            {q:"Ø±ÙØ¨ÙÙ‘ÙƒÙ",tr:"Rabbuka",a:"Ton Seigneur",opts:[{t:"Ton Seigneur",i:"ğŸ¤²"},{t:"Ton Ami",i:"ğŸ¤"}]}
          ],
          puzzle: [
            {full:["Ø£ÙÙ„ÙÙ…Û¡","ØªÙØ±Ù","ÙƒÙÙŠÛ¡ÙÙ","ÙÙØ¹ÙÙ„Ù","Ø±ÙØ¨ÙÙ‘ÙƒÙ"],tr:"Alam tara kayfa fa'ala rabbuka"},
            {full:["Ø¨ÙØ£ÙØµÛ¡Ø­ÙÙ°Ø¨Ù","Ù±Ù„Û¡ÙÙÙŠÙ„Ù"],tr:"Bi-ashabi l-fil"},
            {full:["Ø£ÙÙ„ÙÙ…Û¡","ÙŠÙØ¬Û¡Ø¹ÙÙ„Û¡","ÙƒÙÙŠÛ¡Ø¯ÙÙ‡ÙÙ…Û¡","ÙÙÙŠ","ØªÙØ¶Û¡Ù„ÙÙŠÙ„Ù–"],tr:"Alam yaj'al kaydahum fi tadlil"},
            {full:["ÙˆÙØ£ÙØ±Û¡Ø³ÙÙ„Ù","Ø¹ÙÙ„ÙÙŠÛ¡Ù‡ÙÙ…Û¡","Ø·ÙÙŠÛ¡Ø±Ù‹Ø§","Ø£ÙØ¨ÙØ§Ø¨ÙÙŠÙ„Ù"],tr:"Wa arsala 'alayhim tayran ababil"},
            {full:["ØªÙØ±Û¡Ù…ÙÙŠÙ‡ÙÙ…","Ø¨ÙØ­ÙØ¬ÙØ§Ø±ÙØ©Ù–","Ù…ÙÙ‘Ù†","Ø³ÙØ¬ÙÙ‘ÙŠÙ„Ù–"],tr:"Tarmihim bi-hijaratin min sijjil"},
            {full:["ÙÙØ¬ÙØ¹ÙÙ„ÙÙ‡ÙÙ…Û¡","ÙƒÙØ¹ÙØµÛ¡ÙÙ–","Ù…ÙÙ‘Ø£Û¡ÙƒÙÙˆÙ„ÙÛ­"],tr:"Fa-ja'alahum ka'asfin ma'kul"}
          ],
          missing: [
            {q:"Ø¨ÙØ£ÙØµÛ¡Ø­ÙÙ°Ø¨Ù .......",tr:"Bi-ashabi ...",a:"Ù±Ù„Û¡ÙÙÙŠÙ„Ù",opts:[{t:"Ù±Ù„Û¡ÙÙÙŠÙ„Ù",i:"ğŸ˜"},{t:"Ù±Ù„Û¡Ø¥ÙØ¨ÙÙ„Ù",i:"ğŸ«"}]},
            {q:"ÙˆÙØ£ÙØ±Û¡Ø³ÙÙ„Ù Ø¹ÙÙ„ÙÙŠÛ¡Ù‡ÙÙ…Û¡ .......",tr:"Wa arsala 'alayhim ...",a:"Ø·ÙÙŠÛ¡Ø±Ù‹Ø§",opts:[{t:"Ø·ÙÙŠÛ¡Ø±Ù‹Ø§",i:"ğŸ¦…"},{t:"Ø±ÙÙŠØ­Ù‹Ø§",i:"ğŸŒ¬ï¸"}]},
            {q:"ØªÙØ±Û¡Ù…ÙÙŠÙ‡ÙÙ… .......",tr:"Tarmihim ...",a:"Ø¨ÙØ­ÙØ¬ÙØ§Ø±ÙØ©Ù–",opts:[{t:"Ø¨ÙØ­ÙØ¬ÙØ§Ø±ÙØ©Ù–",i:"ğŸª¨"},{t:"Ø¨ÙÙ…ÙØ§Ø¡Ù",i:"ğŸ’§"}]},
            {q:"....... ÙƒÙÙŠÛ¡Ø¯ÙÙ‡ÙÙ…Û¡ ÙÙÙŠ ØªÙØ¶Û¡Ù„ÙÙŠÙ„Ù–",tr:"... kaydahum fi tadlil",a:"Ø£ÙÙ„ÙÙ…Û¡ ÙŠÙØ¬Û¡Ø¹ÙÙ„Û¡",opts:[{t:"Ø£ÙÙ„ÙÙ…Û¡ ÙŠÙØ¬Û¡Ø¹ÙÙ„Û¡",i:"â“"},{t:"Ø£ÙÙ„ÙÙ…Û¡ ÙŠÙØ±Ù",i:"ğŸ‘€"}]}
          ]
        },
        age8: {
          vocab: [
            {q:"ÙƒÙÙŠÛ¡Ø¯ÙÙ‡ÙÙ…Û¡",tr:"Kaydahum",a:"Leur ruse",opts:["Leur ruse","Leur maison","Leur argent"]},
            {q:"ØªÙØ¶Û¡Ù„ÙÙŠÙ„Ù–",tr:"Tadlil",a:"Perdition/Echec",opts:["Perdition/Echec","Victoire","Route"]},
            {q:"Ø³ÙØ¬ÙÙ‘ÙŠÙ„Ù–",tr:"Sijjil",a:"Argile durcie",opts:["Argile durcie","Fer","Feu"]},
            {q:"Ø¹ÙØµÛ¡ÙÙ–",tr:"'Asf",a:"Paille",opts:["Paille","Pain","Viande"]},
            {q:"Ù…ÙÙ‘Ø£Û¡ÙƒÙÙˆÙ„ÙÛ­",tr:"Ma'kul",a:"MÃ¢chÃ©e",opts:["MÃ¢chÃ©e","MangÃ©e","Buvable"]},
            {q:"Ø£ÙØ¨ÙØ§Ø¨ÙÙŠÙ„Ù",tr:"Ababil",a:"Par volÃ©es (Groupes)",opts:["Par volÃ©es (Groupes)","Grand","Rapide"]}
          ],
          puzzle: [
            {full:["Ø£ÙÙ„ÙÙ…Û¡","ØªÙØ±Ù","ÙƒÙÙŠÛ¡ÙÙ","ÙÙØ¹ÙÙ„Ù","Ø±ÙØ¨ÙÙ‘ÙƒÙ","Ø¨ÙØ£ÙØµÛ¡Ø­ÙÙ°Ø¨Ù","Ù±Ù„Û¡ÙÙÙŠÙ„Ù"],tr:"Verset 1 complet"},
            {full:["Ø£ÙÙ„ÙÙ…Û¡","ÙŠÙØ¬Û¡Ø¹ÙÙ„Û¡","ÙƒÙÙŠÛ¡Ø¯ÙÙ‡ÙÙ…Û¡","ÙÙÙŠ","ØªÙØ¶Û¡Ù„ÙÙŠÙ„Ù–"],tr:"Verset 2 complet"},
            {full:["ÙˆÙØ£ÙØ±Û¡Ø³ÙÙ„Ù","Ø¹ÙÙ„ÙÙŠÛ¡Ù‡ÙÙ…Û¡","Ø·ÙÙŠÛ¡Ø±Ù‹Ø§","Ø£ÙØ¨ÙØ§Ø¨ÙÙŠÙ„Ù"],tr:"Verset 3 complet"},
            {full:["ØªÙØ±Û¡Ù…ÙÙŠÙ‡ÙÙ…","Ø¨ÙØ­ÙØ¬ÙØ§Ø±ÙØ©Ù–","Ù…ÙÙ‘Ù†","Ø³ÙØ¬ÙÙ‘ÙŠÙ„Ù–"],tr:"Verset 4 complet"},
            {full:["ÙÙØ¬ÙØ¹ÙÙ„ÙÙ‡ÙÙ…Û¡","ÙƒÙØ¹ÙØµÛ¡ÙÙ–","Ù…ÙÙ‘Ø£Û¡ÙƒÙÙˆÙ„ÙÛ­"],tr:"Verset 5 complet"}
          ],
          missing: [
            {q:"....... Ø±ÙØ¨ÙÙ‘ÙƒÙ Ø¨ÙØ£ÙØµÛ¡Ø­ÙÙ°Ø¨Ù Ù±Ù„Û¡ÙÙÙŠÙ„Ù",tr:"... Rabbuka bi-ashabi l-fil",a:"ÙÙØ¹ÙÙ„Ù",opts:["ÙÙØ¹ÙÙ„Ù","Ù‚ÙØ§Ù„Ù"]},
            {q:"Ø£ÙÙ„ÙÙ…Û¡ ÙŠÙØ¬Û¡Ø¹ÙÙ„Û¡ ....... ÙÙÙŠ ØªÙØ¶Û¡Ù„ÙÙŠÙ„Ù–",tr:"Alam yaj'al ... fi tadlil",a:"ÙƒÙÙŠÛ¡Ø¯ÙÙ‡ÙÙ…Û¡",opts:["ÙƒÙÙŠÛ¡Ø¯ÙÙ‡ÙÙ…Û¡","Ø£ÙÙ…Ù’Ø±ÙÙ‡ÙÙ…Û¡"]},
            {q:"ÙˆÙØ£ÙØ±Û¡Ø³ÙÙ„Ù Ø¹ÙÙ„ÙÙŠÛ¡Ù‡ÙÙ…Û¡ ....... Ø£ÙØ¨ÙØ§Ø¨ÙÙŠÙ„Ù",tr:"Wa arsala ... ababil",a:"Ø·ÙÙŠÛ¡Ø±Ù‹Ø§",opts:["Ø·ÙÙŠÛ¡Ø±Ù‹Ø§","Ù…ÙÙ„ÙÙ°Ù“Ø¦ÙÙƒÙØ©Ù—"]},
            {q:"ØªÙØ±Û¡Ù…ÙÙŠÙ‡ÙÙ… Ø¨ÙØ­ÙØ¬ÙØ§Ø±ÙØ©Ù– Ù…ÙÙ‘Ù† .......",tr:"Tarmihim ... min ...",a:"Ø³ÙØ¬ÙÙ‘ÙŠÙ„Ù–",opts:["Ø³ÙØ¬ÙÙ‘ÙŠÙ„Ù–","Ø°ÙÙ‡ÙØ¨Ù–"]},
            {q:"ÙÙØ¬ÙØ¹ÙÙ„ÙÙ‡ÙÙ…Û¡ ÙƒÙØ¹ÙØµÛ¡ÙÙ– .......",tr:"Faja'alahum ka'asfin ...",a:"Ù…ÙÙ‘Ø£Û¡ÙƒÙÙˆÙ„ÙÛ­",opts:["Ù…ÙÙ‘Ø£Û¡ÙƒÙÙˆÙ„ÙÛ­","Ù…ÙØ´Ù’Ø±ÙÙˆØ¨Ù–"]}
          ]
        }
      }
    },

    // 2. AL-ALAQ (LA RÃ‰VÃ‰LATION) - PREMIUM + SOURCES
    "al-alaq": {
      title: "Al-'Alaq (L'AdhÃ©rence)", surahId: 96,
      verses: [
        { id:1, ar:"Ù±Ù‚Û¡Ø±ÙØ£Û¡ Ø¨ÙÙ±Ø³Û¡Ù…Ù Ø±ÙØ¨ÙÙ‘ÙƒÙ Ù±Ù„ÙÙ‘Ø°ÙÙŠ Ø®ÙÙ„ÙÙ‚Ù", tr:"Iqra' bismi rabbika alladhi khalaq", fr:"Lis, au nom de ton Seigneur qui a crÃ©Ã©," },
        { id:2, ar:"Ø®ÙÙ„ÙÙ‚Ù Ù±Ù„Û¡Ø¥ÙÙ†Ø³ÙÙ°Ù†Ù Ù…ÙÙ†Û¡ Ø¹ÙÙ„ÙÙ‚Ù", tr:"Khalaqa al-insana min 'alaq", fr:"qui a crÃ©Ã© l'homme d'une adhÃ©rence." },
        { id:3, ar:"Ù±Ù‚Û¡Ø±ÙØ£Û¡ ÙˆÙØ±ÙØ¨ÙÙ‘ÙƒÙ Ù±Ù„Û¡Ø£ÙÙƒÛ¡Ø±ÙÙ…Ù", tr:"Iqra' wa rabbuka al-akram", fr:"Lis ! Ton Seigneur est le TrÃ¨s Noble," },
        { id:4, ar:"Ù±Ù„ÙÙ‘Ø°ÙÙŠ Ø¹ÙÙ„ÙÙ‘Ù…Ù Ø¨ÙÙ±Ù„Û¡Ù‚ÙÙ„ÙÙ…Ù", tr:"Alladhi 'allama bil-qalam", fr:"qui a enseignÃ© par la plume (le calame)," },
        { id:5, ar:"Ø¹ÙÙ„ÙÙ‘Ù…Ù Ù±Ù„Û¡Ø¥ÙÙ†Ø³ÙÙ°Ù†Ù Ù…ÙØ§ Ù„ÙÙ…Û¡ ÙŠÙØ¹Û¡Ù„ÙÙ…Û¡", tr:"'Allama al-insana ma lam ya'lam", fr:"a enseignÃ© Ã  l'homme ce qu'il ne savait pas." }
      ],
      story: {
        eveil: [
          { img:"â›°ï¸", title:"La Grotte Silencieuse", text:"Le ProphÃ¨te Muhammad ï·º aimait se retirer dans la grotte de Hira, sur la montagne prÃ¨s de La Mecque, pour mÃ©diter et prier Allah, loin des idoles et des mauvaises actions de son peuple.", sourceDetail:"Le ProphÃ¨te aimait s'isoler pour adorer Allah :\n\n(ØªÙØ³ÙŠØ± Ø§Ù„Ù…Ø±Ø§ØºÙŠ [2])." },
          { img:"âœ¨", title:"Lâ€™Ange et le CÃ¢lin", text:"Un jour, alors quâ€™il Ã©tait dans la grotte, lâ€™ange Jibril est venu et lui a dit : Â« Lis ! Â» (Iqra). Le ProphÃ¨te a rÃ©pondu : Â« Je ne sais pas lire ! Â» Lâ€™ange lâ€™a alors serrÃ© trÃ¨s fort, puis a rÃ©pÃ©tÃ© lâ€™ordre trois fois.", sourceDetail:"L'ordre de lire et l'Ã©treinte de l'ange :\n\n<span class='ar-text'>Ø§Ù‚Ø±Ø£ Ø¨Ø§Ø³Ù… Ø±Ø¨Ùƒ Ø§Ù„Ø°ÙŠ Ø®Ù„Ù‚</span>\n(Ù…Ø¹Ø§Ù†ÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù† ÙˆØ¥Ø¹Ø±Ø§Ø¨Ù‡ [1]).\n(ØªÙØ³ÙŠØ± Ø§Ù„Ù…Ø±Ø§ØºÙŠ [2])." },
          { img:"ğŸƒ", title:"Cours vite Ã  la maison !", text:"EffrayÃ© par cette expÃ©rience, le ProphÃ¨te est rentrÃ© chez lui en courant, le cÅ“ur battant, et a demandÃ© Ã  sa femme Khadija de le couvrir.", sourceDetail:"Le retour prÃ©cipitÃ© vers la maison :\n\n(ØªÙØ³ÙŠØ± Ø§Ù„Ø¹Ø«ÙŠÙ…ÙŠÙ† [5])." },
          { img:"ğŸ ", title:"Le RÃ©confort de Khadija", text:"Khadija lâ€™a rassurÃ© et lui a dit quâ€™Allah ne lâ€™abandonnerait jamais, car il Ã©tait honnÃªte et aidait les pauvres.", sourceDetail:"Le soutien de Khadija :\n\n(ØªÙØ³ÙŠØ± Ø§Ù„Ù…Ø±Ø§ØºÙŠ [2])." }
        ],
        chercheur: [
          { img:"ğŸ©¸", title:"Miracle Scientifique", text:"Allah a rÃ©vÃ©lÃ© : Â« Il a crÃ©Ã© lâ€™homme dâ€™une adhÃ©rence Â» ('Alaq). Le mot Â« â€˜alaq Â» dÃ©signe un caillot de sang accrochÃ©, ce qui correspond Ã  la premiÃ¨re Ã©tape de la crÃ©ation de lâ€™Ãªtre humain.", sourceDetail:"Le miracle de la crÃ©ation :\n\n<span class='ar-text'>Ø®Ù„Ù‚ Ø§Ù„Ø¥Ù†Ø³Ø§Ù† Ù…Ù† Ø¹Ù„Ù‚</span>\n(Ø§Ù„ØªÙØ³ÙŠØ± Ø§Ù„Ù…Ù†ÙŠØ± [8]).\n(ØªÙØ³ÙŠØ± Ø§Ù„Ù‡Ø¯Ø§ÙŠÙ‡ Ø¥Ù„Ù‰ Ø¨Ù„ÙˆØº Ø§Ù„Ù†Ù‡Ø§ÙŠÙ‡ [15])." },
          { img:"âœï¸", title:"Le Savoir et le Calame", text:"Allah a aussi dit : Â« Celui qui a enseignÃ© par le calame Â». Cela montre lâ€™importance de la connaissance et de lâ€™Ã©criture dans lâ€™Islam, dÃ¨s les premiers mots rÃ©vÃ©lÃ©s.", sourceDetail:"L'importance de la science :\n\n<span class='ar-text'>Ø§Ù„Ø°ÙŠ Ø¹Ù„Ù… Ø¨Ø§Ù„Ù‚Ù„Ù…</span>\n(Ù…Ø¹Ø§Ù†ÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù† ÙˆØ¥Ø¹Ø±Ø§Ø¨Ù‡ [1]).\n(Ù…Ø¨Ø§Ø­Ø« ÙÙŠ Ø¹Ù„ÙˆÙ… Ø§Ù„Ù‚Ø±Ø¢Ù† [13])." },
          { img:"ğŸ“œ", title:"La PremiÃ¨re RÃ©vÃ©lation", text:"Les savants sont unanimes : les cinq premiers versets de la sourate Al-â€˜Alaq sont les tout premiers mots rÃ©vÃ©lÃ©s au ProphÃ¨te Muhammad ï·º dans la grotte de Hira.", sourceDetail:"Consensus des savants :\n\n(Ø§Ù„Ù…Ø­Ø±Ø± Ø§Ù„ÙˆØ¬ÙŠØ² ÙÙŠ ØªÙØ³ÙŠØ± Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ø¹Ø²ÙŠØ² [4]).\n(Ø²Ø§Ø¯ Ø§Ù„Ù…Ø³ÙŠØ± [11]).\n(ØªÙØ³ÙŠØ± Ø§Ù„Ù…ÙŠØ²Ø§Ù† [9])." },
          { img:"ğŸŒ", title:"Message Universel", text:"Cette rÃ©vÃ©lation marque le dÃ©but dâ€™une nouvelle Ã¨re pour lâ€™humanitÃ©, oÃ¹ Allah invite les hommes Ã  apprendre, Ã  rÃ©flÃ©chir et Ã  se rapprocher de Lui.", sourceDetail:"Le dÃ©but de la mission :\n\n(Ù…Ø¨Ø§Ø­Ø« ÙÙŠ Ø¹Ù„ÙˆÙ… Ø§Ù„Ù‚Ø±Ø¢Ù† [13])." }
        ]
      },
      games: {
        age6: {
          vocab: [
            {q:"Ù±Ù‚Û¡Ø±ÙØ£Û¡",tr:"Iqra'",a:"Lis !",opts:[{t:"Lis !",i:"ğŸ“–"},{t:"Ã‰cris !",i:"âœï¸"}]},
            {q:"Ù±Ù„Û¡Ø¥ÙÙ†Ø³ÙÙ°Ù†Ù",tr:"Al-Insan",a:"L'Homme",opts:[{t:"L'Homme",i:"ğŸ‘¤"},{t:"L'Ange",i:"âœ¨"}]},
            {q:"Ø¹ÙÙ„ÙÙ‚Ù",tr:"'Alaq",a:"AdhÃ©rence",opts:[{t:"AdhÃ©rence",i:"ğŸ©¸"},{t:"Eau",i:"ğŸ’§"}]},
            {q:"Ù±Ù„Û¡Ù‚ÙÙ„ÙÙ…Ù",tr:"Al-Qalam",a:"La Plume",opts:[{t:"La Plume",i:"ğŸ–‹ï¸"},{t:"Le Livre",i:"ğŸ“˜"}]},
            {q:"Ø®ÙÙ„ÙÙ‚Ù",tr:"Khalaqa",a:"Il a crÃ©Ã©",opts:[{t:"Il a crÃ©Ã©",i:"ğŸ—ï¸"},{t:"Il a dÃ©truit",i:"ğŸ’¥"}]},
            {q:"Ù±Ù„ÙÙ‘Ø°ÙÙŠ",tr:"Alladhi",a:"Celui qui",opts:[{t:"Celui qui",i:"â˜ï¸"},{t:"OÃ¹",i:"ğŸ“"}]}
          ],
          puzzle: [
            {full:["Ù±Ù‚Û¡Ø±ÙØ£Û¡","Ø¨ÙÙ±Ø³Û¡Ù…Ù","Ø±ÙØ¨ÙÙ‘ÙƒÙ","Ù±Ù„ÙÙ‘Ø°ÙÙŠ","Ø®ÙÙ„ÙÙ‚Ù"],tr:"Iqra' bismi rabbika alladhi khalaq"},
            {full:["Ø®ÙÙ„ÙÙ‚Ù","Ù±Ù„Û¡Ø¥ÙÙ†Ø³ÙÙ°Ù†Ù","Ù…ÙÙ†Û¡","Ø¹ÙÙ„ÙÙ‚Ù"],tr:"Khalaqa al-insana min 'alaq"},
            {full:["Ù±Ù‚Û¡Ø±ÙØ£Û¡","ÙˆÙØ±Ùâ€ŒØ¨ÙÙ‘ÙƒÙ","Ù±Ù„Û¡Ø£ÙÙƒÛ¡Ø±ÙÙ…Ù"],tr:"Iqra' wa rabbuka al-akram"},
            {full:["Ù±Ù„ÙÙ‘Ø°ÙÙŠ","Ø¹ÙÙ„ÙÙ‘Ù…Ù","Ø¨ÙÙ±Ù„Û¡Ù‚ÙÙ„ÙÙ…Ù"],tr:"Alladhi 'allama bil-qalam"},
            {full:["Ø¹ÙÙ„ÙÙ‘Ù…Ù","Ù±Ù„Û¡Ø¥ÙÙ†Ø³ÙÙ°Ù†Ù","Ù…ÙØ§","Ù„ÙÙ…Û¡","ÙŠÙØ¹Û¡Ù„ÙÙ…Û¡"],tr:"'Allama al-insana ma lam ya'lam"}
          ],
          missing: [
            {q:"Ù±Ù‚Û¡Ø±ÙØ£Û¡ Ø¨ÙÙ±Ø³Û¡Ù…Ù ....... Ù±Ù„ÙÙ‘Ø°ÙÙŠ Ø®ÙÙ„ÙÙ‚Ù",tr:"Iqra' bismi ... alladhi khalaq",a:"Ø±ÙØ¨ÙÙ‘ÙƒÙ",opts:[{t:"Ø±ÙØ¨ÙÙ‘ÙƒÙ",i:"ğŸ¤²"},{t:"Ù†ÙØ¨ÙÙŠÙÙ‘ÙƒÙ",i:"ğŸ‘³"}]},
            {q:"Ø®ÙÙ„ÙÙ‚Ù Ù±Ù„Û¡Ø¥ÙÙ†Ø³ÙÙ°Ù†Ù Ù…ÙÙ†Û¡ .......",tr:"Khalaqa l-insana min ...",a:"Ø¹ÙÙ„ÙÙ‚Ù",opts:[{t:"Ø¹ÙÙ„ÙÙ‚Ù",i:"ğŸ©¸"},{t:"ØªÙØ±ÙØ§Ø¨Ù",i:"ğŸœï¸"}]},
            {q:"Ù±Ù„ÙÙ‘Ø°ÙÙŠ Ø¹ÙÙ„ÙÙ‘Ù…Ù .......",tr:"Alladhi 'allama ...",a:"Ø¨ÙÙ±Ù„Û¡Ù‚ÙÙ„ÙÙ…Ù",opts:[{t:"Ø¨ÙÙ±Ù„Û¡Ù‚ÙÙ„ÙÙ…Ù",i:"ğŸ–‹ï¸"},{t:"Ø¨ÙÙ±Ù„Ø³ÙÙ‘ÙŠÙ’ÙÙ",i:"âš”ï¸"}]},
            {q:"....... Ù±Ù„Û¡Ø¥ÙÙ†Ø³ÙÙ°Ù†Ù Ù…ÙØ§ Ù„ÙÙ…Û¡ ÙŠÙØ¹Û¡Ù„ÙÙ…Û¡",tr:"... al-insana ma lam ya'lam",a:"Ø¹ÙÙ„ÙÙ‘Ù…Ù",opts:[{t:"Ø¹ÙÙ„ÙÙ‘Ù…Ù",i:"ğŸ§ "},{t:"Ø®ÙÙ„ÙÙ‚Ù",i:"âœ¨"}]}
          ]
        },
        age8: {
          vocab: [
            {q:"Ù±Ù„Û¡Ø£ÙÙƒÛ¡Ø±ÙÙ…Ù",tr:"Al-Akram",a:"Le TrÃ¨s GÃ©nÃ©reux",opts:["Le TrÃ¨s GÃ©nÃ©reux","Le TrÃ¨s Puissant","Le TrÃ¨s Savant"]},
            {q:"Ø¨ÙÙ±Ù„Û¡Ù‚ÙÙ„ÙÙ…Ù",tr:"Bil-Qalam",a:"Par la plume",opts:["Par la plume","Par la parole","Par l'Ã©pÃ©e"]},
            {q:"Ù…ÙØ§ Ù„ÙÙ…Û¡ ÙŠÙØ¹Û¡Ù„ÙÙ…Û¡",tr:"Ma lam ya'lam",a:"Ce qu'il ne savait pas",opts:["Ce qu'il ne savait pas","Ce qu'il a oubliÃ©","Ce qu'il a vu"]},
            {q:"Ø¹ÙÙ„ÙÙ‚Ù",tr:"'Alaq",a:"Caillot / AdhÃ©rence",opts:["Caillot / AdhÃ©rence","Argile","Eau"]},
            {q:"Ù±Ù‚Û¡Ø±ÙØ£Û¡",tr:"Iqra'",a:"Lis (Ordre)",opts:["Lis (Ordre)","Ã‰coute","Regarde"]},
            {q:"Ø±ÙØ¨ÙÙ‘ÙƒÙ",tr:"Rabbuka",a:"Ton Seigneur (Ã‰ducateur)",opts:["Ton Seigneur (Ã‰ducateur)","Ton Roi","Ton CrÃ©ateur"]}
          ],
          puzzle: [
            {full:["Ù±Ù‚Û¡Ø±ÙØ£Û¡","Ø¨ÙÙ±Ø³Û¡Ù…Ù","Ø±ÙØ¨ÙÙ‘ÙƒÙ","Ù±Ù„ÙÙ‘Ø°ÙÙŠ","Ø®ÙÙ„ÙÙ‚Ù"],tr:"Verset 1"},
            {full:["Ø®ÙÙ„ÙÙ‚Ù","Ù±Ù„Û¡Ø¥ÙÙ†Ø³ÙÙ°Ù†Ù","Ù…ÙÙ†Û¡","Ø¹ÙÙ„ÙÙ‚Ù"],tr:"Verset 2"},
            {full:["Ù±Ù‚Û¡Ø±ÙØ£Û¡","ÙˆÙØ±Ùâ€ŒØ¨ÙÙ‘ÙƒÙ","Ù±Ù„Û¡Ø£ÙÙƒÛ¡Ø±ÙÙ…Ù"],tr:"Verset 3"},
            {full:["Ù±Ù„ÙÙ‘Ø°ÙÙŠ","Ø¹ÙÙ„ÙÙ‘Ù…Ù","Ø¨ÙÙ±Ù„Û¡Ù‚ÙÙ„ÙÙ…Ù"],tr:"Verset 4"},
            {full:["Ø¹ÙÙ„ÙÙ‘Ù…Ù","Ù±Ù„Û¡Ø¥ÙÙ†Ø³ÙÙ°Ù†Ù","Ù…ÙØ§","Ù„ÙÙ…Û¡","ÙŠÙØ¹Û¡Ù„ÙÙ…Û¡"],tr:"Verset 5"}
          ],
          missing: [
            {q:"....... Ø¨ÙÙ±Ø³Û¡Ù…Ù Ø±ÙØ¨ÙÙ‘ÙƒÙ Ù±Ù„ÙÙ‘Ø°ÙÙŠ Ø®ÙÙ„ÙÙ‚Ù",tr:"... bismi rabbika...",a:"Ù±Ù‚Û¡Ø±ÙØ£Û¡",opts:["Ù±Ù‚Û¡Ø±ÙØ£Û¡","Ù‚ÙÙ…Ù’"]},
            {q:"Ù±Ù‚Û¡Ø±ÙØ£Û¡ ÙˆÙØ±ÙØ¨ÙÙ‘ÙƒÙ .......",tr:"Iqra' wa rabbuka...",a:"Ù±Ù„Û¡Ø£ÙÙƒÛ¡Ø±ÙÙ…Ù",opts:["Ù±Ù„Û¡Ø£ÙÙƒÛ¡Ø±ÙÙ…Ù","Ù±Ù„Ù’Ø¹ÙØ¸ÙÙŠÙ…Ù"]},
            {q:"Ù±Ù„ÙÙ‘Ø°ÙÙŠ Ø¹ÙÙ„ÙÙ‘Ù…Ù .......",tr:"Alladhi 'allama...",a:"Ø¨ÙÙ±Ù„Û¡Ù‚ÙÙ„ÙÙ…Ù",opts:["Ø¨ÙÙ±Ù„Û¡Ù‚ÙÙ„ÙÙ…Ù","Ø¨ÙÙ±Ù„Ù’ÙˆÙØ­Ù’ÙŠÙ"]},
            {q:"Ø¹ÙÙ„ÙÙ‘Ù…Ù Ù±Ù„Û¡Ø¥ÙÙ†Ø³ÙÙ°Ù†Ù Ù…ÙØ§ Ù„ÙÙ…Û¡ .......",tr:"... ma lam...",a:"ÙŠÙØ¹Û¡Ù„ÙÙ…Û¡",opts:["ÙŠÙØ¹Û¡Ù„ÙÙ…Û¡","ÙŠÙÙÙ’Ù‡ÙÙ…Û¡"]},
            {q:"Ø®ÙÙ„ÙÙ‚Ù Ù±Ù„Û¡Ø¥ÙÙ†Ø³ÙÙ°Ù†Ù Ù…ÙÙ†Û¡ .......",tr:"Khalaqa al-insana min...",a:"Ø¹ÙÙ„ÙÙ‚Ù",opts:["Ø¹ÙÙ„ÙÙ‚Ù","Ù…ÙØ§Ø¡Ù"]}
          ]
        }
      }
    },

    // 5. AR-ROUM (LES ROMAINS) - PREMIUM + SOURCES
    "ar-rum": {
      title: "Ar-Rum (Les Romains)", surahId: 30,
      verses: [
        { id:1, ar:"Ø§Ù„Ù“Ù…Ù“", tr:"Alif - LÃ¢m - MÃ®m", fr:"Alif, LÃ¢m, MÃ®m." },
        { id:2, ar:"ØºÙÙ„ÙØ¨ÙØªÙ Ù±Ù„Ø±ÙÙ‘ÙˆÙ…Ù", tr:"Ghoulibati r-Roum", fr:"Les Romains ont Ã©tÃ© vaincus," },
        { id:3, ar:"ÙÙÙŠÙ“ Ø£ÙØ¯Û¡Ù†ÙÙ‰ Ù±Ù„Û¡Ø£ÙØ±Û¡Ø¶Ù ÙˆÙÙ‡ÙÙ… Ù…ÙÙ‘Ù†Û¢ Ø¨ÙØ¹Û¡Ø¯Ù ØºÙÙ„ÙØ¨ÙÙ‡ÙÙ…Û¡ Ø³ÙÙŠÙØºÛ¡Ù„ÙØ¨ÙÙˆÙ†Ù", tr:"FÄ« adna l-ará¸i wa hum min baâ€˜di ghalabihim sayaghlibÅ«n", fr:"dans le pays voisin, et aprÃ¨s leur dÃ©faite ils seront vainqueurs," },
        { id:4, ar:"ÙÙÙŠ Ø¨ÙØ¶Û¡Ø¹Ù Ø³ÙÙ†ÙÙŠÙ†ÙÛ— Ù„ÙÙ„ÙÙ‘Ù‡Ù Ù±Ù„Û¡Ø£ÙÙ…Û¡Ø±Ù Ù…ÙÙ† Ù‚ÙØ¨Û¡Ù„Ù ÙˆÙÙ…ÙÙ†Û¢ Ø¨ÙØ¹Û¡Ø¯ÙÛš ÙˆÙÙŠÙÙˆÛ¡Ù…ÙØ¦ÙØ°Ù– ÙŠÙÙÛ¡Ø±ÙØ­Ù Ù±Ù„Û¡Ù…ÙØ¤Û¡Ù…ÙÙ†ÙÙˆÙ†Ù", tr:"FÄ« biá¸â€˜i sinÄ«n. LillÄhi l-amru min qablu wa min baâ€˜du wa-yawma-idhin yafraá¸¥u al-muâ€™minÅ«n", fr:"dans quelques annÃ©es. Ã€ Allah appartient le commandement, avant comme aprÃ¨s, et ce jour-lÃ  les Croyants se rÃ©jouiront." }
      ],
      story: {
        eveil: [
          { img:"âš”ï¸", title:"La Grande Bataille", text:"Il y a trÃ¨s longtemps, il y avait deux super-pays qui se faisaient la guerre : les Romains (chrÃ©tiens) et les Perses (adorateurs du feu). Les Perses ont attaquÃ© trÃ¨s fort et ont gagnÃ© ! Ils ont pris toutes les terres des Romains.", sourceDetail:"Il y avait entre les Perses et les Romains des guerres. Les Perses ont vaincu les Romains, ce qui a attristÃ© les musulmans.\n(ØªØ°ÙƒØ±Ø© Ø§Ù„Ø£Ø±ÙŠØ¨ ÙÙŠ ØªÙØ³ÙŠØ± Ø§Ù„ØºØ±ÙŠØ¨ØŒ Ø§Ø¨Ù† Ø§Ù„Ø¬ÙˆØ²ÙŠ [1])." },
          { img:"ğŸ˜¢", title:"Les Moqueries", text:"Ã€ La Mecque, les mÃ©chants (Quraysh) se moquaient des Musulmans : Â« Regardez ! Nos amis les Perses ont gagnÃ© ! Nous aussi, nous allons bientÃ´t vous Ã©craser ! Â». Le ProphÃ¨te ï·º et les compagnons Ã©taient tristes.", sourceDetail:"Les polythÃ©istes de La Mecque se sont rÃ©jouis de la victoire des Perses et ont dit aux musulmans : â€œSi vous nous combattez, nous vous vaincrons !â€\n(ÙØªØ­ Ø§Ù„Ø±Ø­Ù…Ù† ÙÙŠ ØªÙØ³ÙŠØ± Ø§Ù„Ù‚Ø±Ø¢Ù†ØŒ Ù…Ø¬ÙŠØ± Ø§Ù„Ø¯ÙŠÙ† Ø§Ù„Ø­Ù†Ø¨Ù„ÙŠ [5])." },
          { img:"âœ¨", title:"La Promesse d'Allah", text:"Mais Allah a envoyÃ© l'Ange Jibril avec une nouvelle incroyable pour rassurer le ProphÃ¨te : Â« Ne sois pas triste. Les Romains ont perdu... MAIS dans quelques annÃ©es seulement, ils vont gagner Ã  nouveau ! Â».", sourceDetail:"Allah a rÃ©vÃ©lÃ© :\n<span class='ar-text'>ØºÙ„Ø¨Øª Ø§Ù„Ø±ÙˆÙ… ... Ø³ÙŠØºÙ„Ø¨ÙˆÙ† ÙÙŠ Ø¨Ø¶Ø¹ Ø³Ù†ÙŠÙ†</span>\n(Les Romains ont Ã©tÃ© vaincus, mais ils seront victorieux).\n(Ø§Ù„ØªØ¨ÙŠØ§Ù† ØªÙØ³ÙŠØ± ØºØ±ÙŠØ¨ Ø§Ù„Ù‚Ø±Ø¢Ù†ØŒ Ø§Ø¨Ù† Ø§Ù„Ù‡Ø§Ø¦Ù… [2])." },
          { img:"ğŸ†", title:"La Victoire Arrive !", text:"Et c'est arrivÃ© ! Exactement 7 ans aprÃ¨s, comme Allah l'avait dit, les Romains sont devenus forts et ont battu les Perses. Le mÃªme jour, les Musulmans ont gagnÃ© leur premiÃ¨re grande bataille (Badr).", sourceDetail:"La victoire des Romains est arrivÃ©e exactement sept ans aprÃ¨s leur dÃ©faite, comme Allah lâ€™avait promis.\n(Ø§Ù„Ù…ÙˆØ³ÙˆØ¹Ø© Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠØ©ØŒ Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„Ø¥Ø¨ÙŠØ§Ø±ÙŠ [14]).\n(ØªÙØ³ÙŠØ± Ø§Ø¨Ù† ÙƒØ«ÙŠØ± [10])." }
        ],
        chercheur: [
          { img:"ğŸŒ", title:"Le Choc Mondial", text:"En l'an 614, l'Empire Perse (Sassanide) a Ã©crasÃ© l'Empire Romain (Byzantin). Ils ont mÃªme capturÃ© JÃ©rusalem ! C'Ã©tait un choc immense. Les paÃ¯ens de La Mecque jubilaient, tandis que les Musulmans ressentaient de la peine pour les ChrÃ©tiens.", sourceDetail:"En 614, lâ€™Empire Perse a Ã©crasÃ© lâ€™Empire Romain. Les polythÃ©istes Ã©taient heureux, alors que les musulmans Ã©taient tristes pour les gens du Livre.\n(Ø§Ù„Ù…Ø­Ø±Ø± Ø§Ù„ÙˆØ¬ÙŠØ² ÙÙŠ ØªÙØ³ÙŠØ± Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ø¹Ø²ÙŠØ² [3]).\n(Ø²Ø§Ø¯ Ø§Ù„Ù…Ø³ÙŠØ± [15])." },
          { img:"ğŸª", title:"Le Pari d'Abou Bakr", text:"La prophÃ©tie semblait si folle que l'un des chefs ennemis, Ubayy ibn Khalaf, a dÃ©fiÃ© Abou Bakr (ra). Ils ont fait un pari de 100 chameaux ! Abou Bakr Ã©tait sÃ»r que la parole d'Allah se rÃ©aliserait.", sourceDetail:"Abou Bakr a pariÃ© avec les polythÃ©istes sur la victoire future des Romains. Ce pari a eu lieu avant lâ€™interdiction des jeux de hasard.\n(ÙØªØ§ÙˆÙ‰ Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ© [17]).\n(ØªÙØ³ÙŠØ± Ø§Ù„Ø¹Ø² Ø¨Ù† Ø¹Ø¨Ø¯ Ø§Ù„Ø³Ù„Ø§Ù… [18])." },
          { img:"â³", title:"Le Code Secret 'Bid'", text:"Dans le verset, Allah utilise un mot arabe trÃ¨s prÃ©cis : 'Bid'i sinin'. En arabe pur, 'Bid'' dÃ©signe strictement un chiffre entre 3 et 9. La victoire est arrivÃ©e exactement la 7Ã¨me annÃ©e. Une prÃ©cision divine !", sourceDetail:"Le mot â€œØ¨Ø¶Ø¹â€ (bidâ€˜) dans le Coran dÃ©signe un nombre entre trois et neuf. La victoire est arrivÃ©e la septiÃ¨me annÃ©e.\n(Ø§Ù„ØªØ¨ÙŠØ§Ù† ØªÙØ³ÙŠØ± ØºØ±ÙŠØ¨ Ø§Ù„Ù‚Ø±Ø¢Ù†ØŒ Ø§Ø¨Ù† Ø§Ù„Ù‡Ø§Ø¦Ù… [2])." },
          { img:"ğŸ‰", title:"Une Double Victoire", text:"La prophÃ©tie s'est rÃ©alisÃ©e lors de la bataille de Ninive en 627. Ce jour-lÃ , les croyants ont eu deux joies : la victoire des Romains et la victoire des Musulmans Ã  Badr.", sourceDetail:"La prophÃ©tie sâ€™est rÃ©alisÃ©e lors de la bataille de Ninive, et le mÃªme jour, les musulmans ont remportÃ© la bataille de Badr.\n<span class='ar-text'>ÙˆÙŠÙˆÙ…Ø¦Ø° ÙŠÙØ±Ø­ Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ† Ø¨Ù†ØµØ± Ø§Ù„Ù„Ù‡</span>\n(ØªÙØ³ÙŠØ± Ø§Ø¨Ù† ÙƒØ«ÙŠØ± [10])." }
        ]
      },
      games: {
        age6: {
          vocab: [
            {q:"Ù±Ù„Ø±ÙÙ‘ÙˆÙ…Ù",tr:"Ar-Roum",a:"Les Romains",opts:[{t:"Les Romains",i:"ğŸ›¡ï¸"},{t:"La Terre",i:"ğŸŒ"}]},
            {q:"ØºÙÙ„ÙØ¨ÙØªÙ",tr:"Ghoulibati",a:"Ont Ã©tÃ© vaincus",opts:[{t:"Ont Ã©tÃ© vaincus",i:"ğŸ³ï¸"},{t:"Ont gagnÃ©",i:"ğŸ†"}]},
            {q:"Ù±Ù„Û¡Ø£ÙØ±Û¡Ø¶Ù",tr:"Al-Ard",a:"La Terre",opts:[{t:"La Terre",i:"ğŸŒ"},{t:"Le Ciel",i:"â˜ï¸"}]},
            {q:"ÙŠÙÙÛ¡Ø±ÙØ­Ù",tr:"Yafrahou",a:"Se rÃ©jouir",opts:[{t:"Se rÃ©jouir",i:"ğŸ˜Š"},{t:"Pleurer",i:"ğŸ˜¢"}]},
            {q:"Ù±Ù„Û¡Ù…ÙØ¤Û¡Ù…ÙÙ†ÙÙˆÙ†Ù",tr:"Al-Mouminoun",a:"Les Croyants",opts:[{t:"Les Croyants",i:"ğŸ¤²"},{t:"Les Autos",i:"ğŸš—"}]},
            {q:"Ø³ÙÙ†ÙÙŠÙ†Ù",tr:"Sinin",a:"AnnÃ©es",opts:[{t:"AnnÃ©es",i:"ğŸ“…"},{t:"Jours",i:"â˜€ï¸"}]}
          ],
          puzzle: [
            {full:["ØºÙÙ„ÙØ¨ÙØªÙ","Ù±Ù„Ø±ÙÙ‘ÙˆÙ…Ù"],tr:"Ghoulibati r-Roum"},
            {full:["ÙÙÙŠÙ“","Ø£ÙØ¯Û¡Ù†ÙÙ‰","Ù±Ù„Û¡Ø£ÙØ±Û¡Ø¶Ù"],tr:"Fi adna l-ardi"},
            {full:["Ù„ÙÙ„ÙÙ‘Ù‡Ù","Ù±Ù„Û¡Ø£ÙÙ…Û¡Ø±Ù"],tr:"Lillahi l-amr"},
            {full:["ÙˆÙÙŠÙÙˆÛ¡Ù…ÙØ¦ÙØ°Ù–","ÙŠÙÙÛ¡Ø±ÙØ­Ù"],tr:"Wa yawma-idhin yafrahu"},
            {full:["ÙŠÙÙÛ¡Ø±ÙØ­Ù","Ù±Ù„Û¡Ù…ÙØ¤Û¡Ù…ÙÙ†ÙÙˆÙ†Ù"],tr:"Yafrahu l-mouminoun"},
            {full:["Ù…ÙÙ†","Ù‚ÙØ¨Û¡Ù„Ù"],tr:"Min qablu"}
          ],
          missing: [
            {q:"ØºÙÙ„ÙØ¨ÙØªÙ .......",tr:"Ghoulibati ...",a:"Ù±Ù„Ø±ÙÙ‘ÙˆÙ…Ù",opts:[{t:"Ù±Ù„Ø±ÙÙ‘ÙˆÙ…Ù",i:"ğŸ›¡ï¸"},{t:"Ù±Ù„Û¡Ø£ÙØ±Û¡Ø¶Ù",i:"ğŸŒ"}]},
            {q:"....... Ù±Ù„Û¡Ø£ÙÙ…Û¡Ø±Ù",tr:"... l-amr",a:"Ù„ÙÙ„ÙÙ‘Ù‡Ù",opts:[{t:"Ù„ÙÙ„ÙÙ‘Ù‡Ù",i:"â˜ï¸"},{t:"Ù„ÙÙ„Ù†ÙÙ‘Ø§Ø³Ù",i:"ğŸ‘¥"}]},
            {q:"ÙˆÙÙŠÙÙˆÛ¡Ù…ÙØ¦ÙØ°Ù– .......",tr:"Wa yawma-idhin ...",a:"ÙŠÙÙÛ¡Ø±ÙØ­Ù",opts:[{t:"ÙŠÙÙÛ¡Ø±ÙØ­Ù",i:"ğŸ˜Š"},{t:"ÙŠÙØ¨Û¡ÙƒÙÙŠ",i:"ğŸ˜¢"}]},
            {q:"....... Ù±Ù„Û¡Ù…ÙØ¤Û¡Ù…ÙÙ†ÙÙˆÙ†Ù",tr:"... l-mouminoun",a:"ÙŠÙÙÛ¡Ø±ÙØ­Ù",opts:[{t:"ÙŠÙÙÛ¡Ø±ÙØ­Ù",i:"ğŸ˜Š"},{t:"ÙŠÙÙ†ÙØ§Ù…Ù",i:"ğŸ˜´"}]},
            {q:"ÙÙÙŠ Ø¨ÙØ¶Û¡Ø¹Ù .......",tr:"Fi bid'i ...",a:"Ø³ÙÙ†ÙÙŠÙ†Ù",opts:[{t:"Ø³ÙÙ†ÙÙŠÙ†Ù",i:"ğŸ“…"},{t:"Ø£ÙÙŠÙÙ‘Ø§Ù…Ù",i:"â˜€ï¸"}]},
            {q:"ÙÙÙŠÙ“ Ø£ÙØ¯Û¡Ù†ÙÙ‰ .......",tr:"Fi adna ...",a:"Ù±Ù„Û¡Ø£ÙØ±Û¡Ø¶Ù",opts:[{t:"Ù±Ù„Û¡Ø£ÙØ±Û¡Ø¶Ù",i:"ğŸŒ"},{t:"Ù±Ù„Ø³ÙÙ‘Ù…ÙØ¢Ø¡Ù",i:"â˜ï¸"}]}
          ]
        },
        age8: {
          vocab: [
            {q:"ØºÙÙ„ÙØ¨ÙØªÙ",tr:"Ghoulibati",a:"Ont Ã©tÃ© vaincus",opts:["Ont gagnÃ©","Ont Ã©tÃ© vaincus","Ont voyagÃ©"]},
            {q:"Ø¨ÙØ¶Û¡Ø¹Ù",tr:"Biá¸â€˜i",a:"3 Ã  9",opts:["Beaucoup","Un seul","3 Ã  9"]},
            {q:"Ø£ÙØ¯Û¡Ù†ÙÙ‰",tr:"Adna",a:"Voisin / Plus bas",opts:["Plus haut","Voisin / Plus bas","Lointain"]},
            {q:"ÙŠÙÙÛ¡Ø±ÙØ­Ù",tr:"Yafrahu",a:"Se rÃ©jouir",opts:["Se rÃ©jouir","Pleurer","Dormir"]},
            {q:"Ù±Ù„Û¡Ø£ÙÙ…Û¡Ø±Ù",tr:"Al-Amr",a:"Le Commandement",opts:["Le Conseil","Le Commandement","L'Argent"]},
            {q:"Ø³ÙÙŠÙØºÛ¡Ù„ÙØ¨ÙÙˆÙ†Ù",tr:"Sayaghliboun",a:"Ils vaincront",opts:["Ils vaincront","Ils perdront","Ils partiront"]}
          ],
          puzzle: [
            {full:["ØºÙÙ„ÙØ¨ÙØªÙ","Ù±Ù„Ø±ÙÙ‘ÙˆÙ…Ù"],tr:"Ghoulibati r-Roum"},
            {full:["ÙÙÙŠÙ“","Ø£ÙØ¯Û¡Ù†ÙÙ‰","Ù±Ù„Û¡Ø£ÙØ±Û¡Ø¶Ù"],tr:"Fi adna l-ardi"},
            {full:["ÙˆÙÙ‡ÙÙ…","Ù…ÙÙ‘Ù†Û¢","Ø¨ÙØ¹Û¡Ø¯Ù","ØºÙÙ„ÙØ¨ÙÙ‡ÙÙ…Û¡","Ø³ÙÙŠÙØºÛ¡Ù„ÙØ¨ÙÙˆÙ†Ù"],tr:"Wa hum min ba'di ghalabihim sayaghlibÅ«n"},
            {full:["Ù„ÙÙ„ÙÙ‘Ù‡Ù","Ù±Ù„Û¡Ø£ÙÙ…Û¡Ø±Ù","Ù…ÙÙ†","Ù‚ÙØ¨Û¡Ù„Ù","ÙˆÙÙ…ÙÙ†Û¢","Ø¨ÙØ¹Û¡Ø¯ÙÛš"],tr:"LillÄhi l-amru min qablu wa min ba'du"},
            {full:["ÙˆÙÙŠÙÙˆÛ¡Ù…ÙØ¦ÙØ°Ù–","ÙŠÙÙÛ¡Ø±ÙØ­Ù","Ù±Ù„Û¡Ù…ÙØ¤Û¡Ù…ÙÙ†ÙÙˆÙ†Ù"],tr:"Wa yawma-idhin yafrahu l-mouminoun"},
            {full:["ÙÙÙŠ","Ø¨ÙØ¶Û¡Ø¹Ù","Ø³ÙÙ†ÙÙŠÙ†Ù"],tr:"Fi bid'i sinin"}
          ],
          missing: [
            {q:"ØºÙÙ„ÙØ¨ÙØªÙ .......",tr:"Ghoulibati ...",a:"Ù±Ù„Ø±ÙÙ‘ÙˆÙ…Ù",opts:["Ù±Ù„Ø±ÙÙ‘ÙˆÙ…Ù","Ù±Ù„Û¡ÙÙØ±Û¡Ø³Ù"]},
            {q:"....... Ù±Ù„Û¡Ø£ÙÙ…Û¡Ø±Ù Ù…ÙÙ† Ù‚ÙØ¨Û¡Ù„Ù",tr:"... al-amru...",a:"Ù„ÙÙ„ÙÙ‘Ù‡Ù",opts:["Ù„ÙÙ„ÙÙ‘Ù‡Ù","Ù„ÙÙ„Ù’Ù…ÙÙ„ÙÙƒÙ"]},
            {q:"ÙˆÙÙŠÙÙˆÛ¡Ù…ÙØ¦ÙØ°Ù– ....... Ù±Ù„Û¡Ù…ÙØ¤Û¡Ù…ÙÙ†ÙÙˆÙ†Ù",tr:"Wa yawma-idhin ... al-mouminoun",a:"ÙŠÙÙÛ¡Ø±ÙØ­Ù",opts:["ÙŠÙÙÛ¡Ø±ÙØ­Ù","ÙŠÙØ­Ù’Ø²ÙÙ†Ù"]},
            {q:"ÙˆÙÙ‡ÙÙ… Ù…ÙÙ‘Ù†Û¢ ....... ØºÙÙ„ÙØ¨ÙÙ‡ÙÙ…Û¡",tr:"Wa hum min ... ghalabihim",a:"Ø¨ÙØ¹Û¡Ø¯Ù",opts:["Ø¨ÙØ¹Û¡Ø¯Ù","Ù‚ÙØ¨Ù’Ù„Ù"]},
            {q:"ÙÙÙŠÙ“ Ø£ÙØ¯Û¡Ù†ÙÙ‰ .......",tr:"Fi adna ...",a:"Ù±Ù„Û¡Ø£ÙØ±Û¡Ø¶Ù",opts:["Ù±Ù„Û¡Ø£ÙØ±Û¡Ø¶Ù","Ù±Ù„Ø³ÙÙ‘Ù…ÙØ¢Ø¡Ù"]},
            {q:"ÙÙÙŠ Ø¨ÙØ¶Û¡Ø¹Ù .......",tr:"Fi bid'i ...",a:"Ø³ÙÙ†ÙÙŠÙ†Ù",opts:["Ø³ÙÙ†ÙÙŠÙ†Ù","Ø£ÙÙŠÙÙ‘Ø§Ù…Ù"]}
          ]
        }
      }
    },
    // PLACEHOLDERS POUR LES FUTURS MODULES
    "ad-duha": { title: "Ad-Duha", surahId: 93, verses: [], story: {eveil:[],chercheur:[]}, games: {age6:{},age8:{}} }
  };

  // ====================== MOTEUR (ENGINE) ======================
  
  let fontSizes = { ar: 30, tr: 15, fr: 15 };
  let currentData = null;

  function loadModule(id) {
    if(!ModuleContent[id] || ModuleContent[id].verses.length === 0) return alert("Ce module arrive bientÃ´t inchaAllah !");
    currentData = ModuleContent[id];
    document.getElementById('view-hub').style.display='none';
    document.getElementById('view-module').style.display='block';
    window.scrollTo(0,0);
    document.getElementById('mod-title').innerText = currentData.title;
    const cont = document.getElementById('verses-container'); cont.innerHTML='';
    currentData.verses.forEach(v => {
      const c = document.createElement('div'); c.className='verse-card'; c.id=`card-${currentData.surahId}-${v.id}`;
      c.innerHTML=`<div class="verse-header"><span class="badge">Verset ${v.id}</span><div class="audio-controls"><button class="play-btn" id="btn-${currentData.surahId}-${v.id}" onclick="playAyah(${currentData.surahId},${v.id})">â–¶</button></div></div><div class="ar-text">${v.ar}</div><div class="tr-text">${v.tr}</div><div class="fr-text">${v.fr}</div>`;
      cont.appendChild(c);
    });
    // RÃ©appliquer les polices actuelles
    adjustSize('ar', 0); adjustSize('tr', 0);
  }
  
  function goHome() { stopAudio(); document.getElementById('view-module').style.display='none'; document.getElementById('view-hub').style.display='block'; }

  // --- AUDIO ---
  let reciter="Minshawy_Teacher_128kbps", currentAudio=null, currentBtnId=null;
  function changeReciter(v){reciter=v;stopAudio();}
  function toggleLayer(c,b){document.querySelectorAll('.'+c).forEach(e=>e.classList.toggle('d-none')); b.style.opacity=(b.style.opacity==="0.5")?"1":"0.5";}
  function stopAudio(){if(currentAudio){currentAudio.pause();currentAudio=null;} document.querySelectorAll('.play-btn').forEach(b=>{b.classList.remove('playing');b.innerText="â–¶"}); document.querySelectorAll('.verse-card').forEach(c=>c.classList.remove('active'));}
  function playAyah(s,a){
    const btnId=`btn-${s}-${a}`;
    if(currentAudio && currentBtnId===btnId){ if(currentAudio.paused){currentAudio.play();document.getElementById(btnId).innerText="â¸";document.getElementById(btnId).classList.add('playing');}else{currentAudio.pause();document.getElementById(btnId).innerText="â–¶";document.getElementById(btnId).classList.remove('playing');} return; }
    stopAudio(); currentBtnId=btnId;
    const btn=document.getElementById(btnId); if(btn){btn.innerText="â¸";btn.classList.add('playing');}
    const card=document.getElementById(`card-${s}-${a}`); if(card)card.classList.add('active');
    currentAudio=new Audio(`https://everyayah.com/data/${reciter}/${String(s).padStart(3,'0')}${String(a).padStart(3,'0')}.mp3`);
    currentAudio.onended=()=>stopAudio(); currentAudio.play().catch(e=>stopAudio());
  }

  // --- STORY ENGINE AVEC FLIP CARD & SWIPE ---
  let currentStoryType='eveil', storyIdx=0;
  
  function openStoryHub(){if(currentAudio)stopAudio();document.getElementById('story-modal').classList.add('open');document.getElementById('story-age-select').style.display='grid';document.getElementById('story-container').style.display='none';}
  function closeStory(){document.getElementById('story-modal').classList.remove('open');}
  function selectStoryAge(t){currentStoryType=t;document.getElementById('story-age-select').style.display='none';document.getElementById('story-container').style.display='flex';storyIdx=0;renderStory();}
  
  function renderStory(){
    const list = currentData.story[currentStoryType];
    if(!list || list.length===0){document.getElementById('story-container').innerHTML="<p style='color:white;'>BientÃ´t...</p>";return;}
    
    if(storyIdx >= list.length) { closeStory(); return; }
    if(storyIdx < 0) { storyIdx = 0; return; }

    const data = list[storyIdx];
    const btnText = (storyIdx < list.length-1) ? "Suivant â¡" : "Terminer âœ…";
    const btnAction = (storyIdx < list.length-1) ? "nextStory()" : "closeStory()";
    
    // CONSTRUCTION DE LA FLIP CARD
    const container = document.getElementById('story-container');
    container.innerHTML = `
      <div class="flip-card" onclick="this.classList.toggle('flipped')">
        <div class="flip-card-inner">
          <div class="flip-card-front">
            <span class="story-img">${data.img}</span>
            <div class="story-title">${data.title}</div>
            <div class="story-text">${data.text}</div>
            <div class="tap-hint">ğŸ‘† Touche pour voir la source</div>
          </div>
          <div class="flip-card-back">
            <span class="source-badge">ğŸ“š SOURCES</span>
            <div class="source-content-back">${data.sourceDetail}</div>
          </div>
        </div>
      </div>
      <button class="story-nav-btn" onclick="${btnAction}">${btnText}</button>
      <div style="color:rgba(255,255,255,0.5); font-size:0.8rem; margin-top:10px;">${storyIdx + 1} / ${list.length}</div>
    `;
  }

  function nextStory(){storyIdx++;renderStory();}
  function prevStory(){if(storyIdx>0){storyIdx--;renderStory();}}

  // --- GESTION DU SWIPE (MOBILE) ---
  let touchStartX = 0;
  let touchEndX = 0;
  const storyContainer = document.getElementById('story-container');

  storyContainer.addEventListener('touchstart', e => {
    touchStartX = e.changedTouches[0].screenX;
  });

  storyContainer.addEventListener('touchend', e => {
    touchEndX = e.changedTouches[0].screenX;
    handleSwipe();
  });

  function handleSwipe() {
    if (touchStartX - touchEndX > 50) {
        // Swipe Gauche (Suivant)
        nextStory();
    }
    if (touchEndX - touchStartX > 50) {
        // Swipe Droite (PrÃ©cÃ©dent)
        prevStory();
    }
  }

  // --- GAMES ENGINE ---
  let currentAge, currentLevel, currentQuestions=[], questionIdx=0;
  const levelOrder=['vocab','puzzle','missing'];
  const screens={age:document.getElementById('age-select-screen'),level:document.getElementById('level-select-screen'),game:document.getElementById('game-area'),win:document.getElementById('level-complete')};
  
  function openGameHub(){if(currentAudio)stopAudio();document.getElementById('game-modal').classList.add('open');resetGame();}
  function closeGameHub(){document.getElementById('game-modal').classList.remove('open');}
  function resetGame(){screens.age.style.display='grid';screens.level.style.display='none';screens.game.style.display='none';screens.win.style.display='none';document.getElementById('progress-track').style.display='none';}
  function selectAge(a){currentAge=a;screens.age.style.display='none';screens.level.style.display='grid';}
  function selectLevel(l){
    currentLevel=l; screens.level.style.display='none'; screens.game.style.display='flex'; screens.win.style.display='none';
    document.getElementById('progress-track').style.display='block';
    const gData = currentData.games[currentAge] && currentData.games[currentAge][currentLevel];
    if(!gData || gData.length===0) { alert("Jeux Ã  venir !"); resetGame(); return; }
    currentQuestions=[...gData].sort(()=>Math.random()-0.5); questionIdx=0; loadQuestion();
  }
  function loadQuestion(){
    if(questionIdx>=currentQuestions.length){finishLevel();return;}
    document.getElementById('progress-fill').style.width=((questionIdx/currentQuestions.length)*100)+'%';
    document.getElementById('correction-box').style.display='none'; isLocked=false;
    const data=currentQuestions[questionIdx];
    const qBox=document.getElementById('question-box'), optGrid=document.getElementById('options-grid'), puzArea=document.getElementById('puzzle-area');
    qBox.innerHTML=''; optGrid.innerHTML=''; optGrid.style.display='none'; puzArea.style.display='none';

    if(currentLevel==='puzzle'){
      puzArea.style.display='block'; qBox.innerHTML=`<div class="q-tr-game" style="color:white; margin-bottom:10px;">${data.tr}</div>`;
      const drop=document.getElementById('puzzle-dropzone'), src=document.getElementById('puzzle-source'); drop.innerHTML=''; src.innerHTML='';
      let userIndices=[], pieces=data.full.map((w,i)=>({w,i}));
      pieces.sort(()=>Math.random()-0.5).forEach(pObj=>{
        const p=document.createElement('div'); p.className='puzzle-piece'; p.innerText=pObj.w; p.dataset.idx=pObj.i;
        p.onclick=function(){
          if(this.parentNode===src){drop.appendChild(this); userIndices.push(parseInt(this.dataset.idx));}
          else{src.appendChild(this); userIndices=userIndices.filter(i=>i!==parseInt(this.dataset.idx));}
          checkPuzzle(userIndices, data.full.length, drop);
        };
        src.appendChild(p);
      });
    } else {
      optGrid.style.display='grid'; qBox.innerHTML=`<div class="q-ar">${data.q}</div><div class="q-tr-game">${data.tr}</div>`;
      [...data.opts].sort(()=>Math.random()-0.5).forEach(opt=>{
        const btn=document.createElement('button'); btn.className='game-btn';
        let valText=(typeof opt==='object')?opt.t:opt;
        btn.innerHTML=(typeof opt==='object')?`<span class="game-btn-icon">${opt.i}</span><span>${opt.t}</span>`:`<span>${opt}</span>`;
        btn.onclick=()=>checkOption(btn, valText, data.a); btn.dataset.val=valText; optGrid.appendChild(btn);
      });
    }
  }
  function checkPuzzle(uIdx, total, drop){
    if(uIdx.length===total){
      if(uIdx.every((v,i)=>v===i)){drop.style.borderColor="#2ecc71"; fireConfetti(); setTimeout(()=>{questionIdx++;loadQuestion();drop.style.borderColor="rgba(255,255,255,0.3)";},1000);}
      else{drop.style.borderColor="#ff4757"; drop.animate([{transform:'translateX(0)'},{transform:'translateX(-10px)'},{transform:'translateX(10px)'},{transform:'translateX(0)'}],{duration:300});}
    }
  }
  function checkOption(btn, sel, corr){
    if(isLocked)return; isLocked=true;
    if(sel===corr){btn.classList.add('correct'); fireConfetti(); setTimeout(()=>{questionIdx++;loadQuestion();},1000);}
    else{btn.classList.add('wrong'); navigator.vibrate?.(300); document.querySelectorAll('.game-btn').forEach(b=>{if(b.dataset.val===corr)b.classList.add('reveal')}); document.getElementById('correction-box').style.display='block'; document.getElementById('correction-box').innerText=`Correction : ${corr}`; setTimeout(()=>{questionIdx++;loadQuestion();},2500);}
  }
  function finishLevel(){
    screens.game.style.display='none'; screens.win.style.display='flex'; fireMassiveConfetti();
    const btn=document.getElementById('next-level-btn'), currentIdx=levelOrder.indexOf(currentLevel);
    if(currentIdx<levelOrder.length-1){ btn.innerText="Jeu Suivant â¡"; btn.onclick=()=>selectLevel(levelOrder[currentIdx+1]); }
    else{ btn.innerText="Menu Principal ğŸ "; btn.onclick=()=>resetGame(); }
  }
  
  function adjustSize(t,d){ 
    fontSizes[t]+=d; 
    if(fontSizes[t]<10)fontSizes[t]=10; 
    if(fontSizes[t]>70)fontSizes[t]=70; 
    
    if(t==='ar')document.querySelectorAll('.ar-text').forEach(e=>e.style.fontSize=fontSizes.ar+'px');
    if(t==='tr')document.querySelectorAll('.tr-text').forEach(e=>e.style.fontSize=fontSizes.tr+'px');
    if(t==='fr')document.querySelectorAll('.fr-text').forEach(e=>e.style.fontSize=fontSizes.fr+'px'); 
  }

  function fireConfetti(){confetti({particleCount:50,spread:60,origin:{y:0.7}});}
  function fireMassiveConfetti(){const end=Date.now()+3000; (function frame(){confetti({particleCount:5,angle:60,spread:55,origin:{x:0},colors:['#00ff88','#fdcb6e']});confetti({particleCount:5,angle:120,spread:55,origin:{x:1},colors:['#00ff88','#fdcb6e']});if(Date.now()<end)requestAnimationFrame(frame);}());}
</script>
</body>
</html>
